(function(e){function t(t){for(var o,r,l=t[0],c=t[1],s=t[2],d=0,_=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&_.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(_.length)_.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,l=1;l<n.length;l++){var c=n[l];0!==i[c]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={app:0},a=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/qcApp/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"002a":function(e,t,n){},"07e3":function(e,t,n){},"0e0b":function(e,t,n){"use strict";n("11be")},1:function(e,t){},10:function(e,t){},1080:function(e,t,n){e.exports=n.p+"assets/img/item-sm-2.aba65a0c.png"},11:function(e,t){},"11be":function(e,t,n){},12:function(e,t){},13:function(e,t){},"135e":function(e,t,n){e.exports=n.p+"assets/img/item-2.1ff23267.png"},14:function(e,t){},"148f":function(e,t,n){"use strict";var o=n("7a23");function i(e,t,n,i,a,r){var l=Object(o["B"])("Checkbox");return Object(o["t"])(),Object(o["f"])(l,{binary:!0,modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.value=e}),value:n.modelValue,disabled:!n.field.Enabled||n.field.Locked,onChange:t[2]||(t[2]=function(e){return r.emitInputs()})},null,8,["modelValue","value","disabled"])}var a=n("2052"),r={name:"APoint-checkbox",components:{Checkbox:a["a"]},props:{field:{},modelValue:String},emits:["update:modelValue"],computed:{value:function(){return this.modelValue}},methods:{emitInputs:function(){this.$emit("update:modelValue",this.value)}}};r.render=i;t["a"]=r},15:function(e,t){},1557:function(e,t,n){},16:function(e,t){},17:function(e,t){},"192d":function(e,t,n){"use strict";var o=n("7a23"),i={class:"editor-container"},a={class:"editorComponent"},r=Object(o["j"])("div",{class:"editor-styling"},null,-1),l={class:"colors"},c={class:"editor"},s={class:"toolbarEditor"},u=Object(o["j"])("svg",{class:"svg-inline--fa fa-undo-alt fa-w-16 fa-lg","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"undo-alt",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[Object(o["j"])("path",{fill:"currentColor",d:"M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273 92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z"})],-1),d=Object(o["j"])("svg",{class:"svg-inline--fa fa-redo-alt fa-w-16 fa-lg","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"redo-alt",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[Object(o["j"])("path",{fill:"currentColor",d:"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z"})],-1),_=Object(o["j"])("svg",{class:"svg-inline--fa fa-trash-alt fa-w-14 fa-lg","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"trash-alt",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512","data-fa-i2svg":""},[Object(o["j"])("path",{fill:"currentColor",d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"})],-1),p=Object(o["j"])("svg",{class:"svg-inline--fa fa-pencil-alt fa-w-16 fa-lg","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"pencil-alt",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[Object(o["j"])("path",{fill:"currentColor",d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"})],-1),m=Object(o["j"])("svg",{class:"svg-inline--fa fa-font fa-w-14 fa-lg","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"font",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512","data-fa-i2svg":""},[Object(o["j"])("path",{fill:"currentColor",d:"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"})],-1),f=Object(o["j"])("svg",{style:{width:"1.5rem"},fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",viewBox:"0 0 512 512","enable-background":"new 0 0 512 512"},[Object(o["j"])("g",null,[Object(o["j"])("g",null,[Object(o["j"])("path",{d:"m289.8,200.2h-49.3v-49.3c0-11.3-9.1-20.4-20.4-20.4-11.3,0-20.4,9.1-20.4,20.4v49.3h-49.3c-11.3,0-20.4,9.1-20.4,20.4 0,11.3 9.1,20.4 20.4,20.4h49.3v49.3c0,11.3 9.1,20.4 20.4,20.4 11.3,0 20.4-9.1 20.4-20.4v-49.3h49.3c11.3,0 20.4-9.1 20.4-20.4 0-11.3-9.2-20.4-20.4-20.4z"}),Object(o["j"])("path",{d:"m220.2,388.7c-92.9,0-168.2-75.2-168.2-168.1s75.3-168.1 168.2-168.1 168.1,75.3 168.1,168.1-75.3,168.1-168.1,168.1zm274.8,78l-113.3-113.3c29.7-36.1 47.6-82.4 47.6-132.8 0-115.5-93.6-209.2-209.2-209.2s-209.1,93.7-209.1,209.2 93.6,209.2 209.2,209.2c50.4,0 96.6-17.8 132.7-47.5l113.3,113.3c5.2,5.3 21.1,7.9 28.9,0 7.9-8 7.9-20.9-0.1-28.9z"})])])],-1),b=Object(o["j"])("svg",{class:"svg-inline--fa fa-circle fa-w-16 fa-lg","aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"circle",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[Object(o["j"])("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"})],-1),j=Object(o["j"])("svg",{class:"svg-inline--fa fa-square fa-w-14 fa-lg","aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"square",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512","data-fa-i2svg":""},[Object(o["j"])("path",{fill:"currentColor",d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V86c0-3.3 2.7-6 6-6h340c3.3 0 6 2.7 6 6v340c0 3.3-2.7 6-6 6z"})],-1),h=Object(o["j"])("svg",{class:"svg-inline--fa fa-arrows-alt fa-w-16 fa-lg","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrows-alt",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[Object(o["j"])("path",{fill:"currentColor",d:"M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"})],-1),O=Object(o["j"])("svg",{class:"svg-inline--fa fa-check-circle fa-w-16 fa-lg","aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"check-circle",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[Object(o["j"])("path",{fill:"currentColor",d:"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"})],-1),g={class:"tool upload-image"},v=Object(o["j"])("label",{for:"chooseImage"},[Object(o["j"])("svg",{class:"svg-inline--fa fa-file-upload fa-w-12 fa-lg","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"file-upload",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512","data-fa-i2svg":""},[Object(o["j"])("path",{fill:"currentColor",d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm65.18 216.01H224v80c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-80H94.82c-14.28 0-21.41-17.29-11.27-27.36l96.42-95.7c6.65-6.61 17.39-6.61 24.04 0l96.42 95.7c10.15 10.07 3.03 27.36-11.25 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"})])],-1),C=Object(o["j"])("svg",{class:"svg-inline--fa fa-save fa-w-14 fa-lg","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"save",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512","data-fa-i2svg":""},[Object(o["j"])("path",{fill:"currentColor",d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"})],-1),y=Object(o["j"])("svg",{class:"svg-inline--fa fa-save fa-w-14 fa-lg",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"416.979px",height:"416.979px",viewBox:"0 0 416.979 416.979",style:{"enable-background":"new 0 0 416.979 416.979"},"xml:space":"preserve"},[Object(o["j"])("g",null,[Object(o["j"])("path",{d:"M355.914,61.065c-81.42-81.42-213.428-81.42-294.849,0s-81.421,213.427,0,294.849c81.42,81.42,213.428,81.42,294.849,0\r\n                  C437.334,274.492,437.334,142.485,355.914,61.065z M312.525,258.763c4.454,4.454,4.454,11.675,0,16.129l-37.632,37.632\r\n                  c-4.454,4.454-11.675,4.453-16.13,0l-50.273-50.275l-50.275,50.275c-4.453,4.455-11.674,4.453-16.128,0l-37.632-37.632\r\n                  c-4.454-4.454-4.453-11.674,0-16.127l50.275-50.276l-50.275-50.275c-4.453-4.454-4.453-11.675,0-16.128l37.633-37.632\r\n                  c4.454-4.454,11.675-4.454,16.127,0l50.275,50.275l50.274-50.275c4.454-4.454,11.675-4.454,16.129,0l37.632,37.632\r\n                  c4.453,4.454,4.454,11.675,0,16.128l-50.275,50.275L312.525,258.763z"})])],-1),w={class:"stroke-width-value"},P={class:"textWidth"};function D(e,t,n,D,E,I){var S=Object(o["B"])("Editor"),k=Object(o["B"])("Slider");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["j"])("img",{src:E.imgSrc},null,8,["src"]),Object(o["j"])("div",i,[Object(o["j"])("div",a,[r,Object(o["j"])("div",l,[Object(o["j"])("div",{class:"tool current-color",style:{"background-color":E.activeColor}},null,4),(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(E.colors,(function(e){return Object(o["t"])(),Object(o["f"])("div",{key:e,class:"color-container",style:{"background-color":e},onClick:function(t){return I.changeColor(e)}},null,12,["onClick"])})),128))])]),Object(o["j"])("div",c,[Object(o["j"])("div",s,[Object(o["j"])("div",{class:["tool undo","undo"==E.mode?"active-tool":""],onClick:t[1]||(t[1]=function(){return I.undo&&I.undo.apply(I,arguments)})},[u],2),Object(o["j"])("div",{class:["tool redo","redo"==E.mode?"active-tool":""],onClick:t[2]||(t[2]=function(){return I.redo&&I.redo.apply(I,arguments)})},[d],2),Object(o["j"])("div",{class:["tool clear","clear"==E.mode?"active-tool":""],onClick:t[3]||(t[3]=function(){return I.clear&&I.clear.apply(I,arguments)})},[_],2),Object(o["j"])("div",{class:["tool free-drawing","freeDrawing"==E.mode?"active-tool":""],onClick:t[4]||(t[4]=function(e){return I.setMode("freeDrawing")})},[p],2),Object(o["j"])("div",{class:["tool add-text","text"==E.mode?"active-tool":""],onClick:t[5]||(t[5]=function(e){return I.setMode("text")})},[m],2),Object(o["j"])("div",{class:["tool zoom-and-move","zoom"===E.mode?"active-tool":""],onClick:t[6]||(t[6]=function(e){return I.setMode("zoom")})},[f],2),Object(o["j"])("div",{class:["tool custom-circle","circle"==E.mode?"active-tool":""],onClick:t[7]||(t[7]=function(e){return I.setMode("circle")})},[b],2),Object(o["j"])("div",{class:["tool custom-rect","rect"==E.mode?"active-tool":""],onClick:t[8]||(t[8]=function(e){return I.setMode("rect")})},[j],2),Object(o["g"])("",!0),Object(o["j"])("div",{class:["tool drag","selectMode"==E.mode?"active-tool":""],onClick:t[10]||(t[10]=function(e){return I.setMode("selectMode")})},[h],2),"crop"==E.mode?(Object(o["t"])(),Object(o["f"])("div",{key:1,class:"tool crop-apply active-tool",onClick:t[11]||(t[11]=function(){return I.applyCropping&&I.applyCropping.apply(I,arguments)})},[O])):Object(o["g"])("",!0),(E.mode,Object(o["g"])("",!0)),Object(o["M"])(Object(o["j"])("div",g,[v,Object(o["j"])("input",{id:"chooseImage",type:"file",accept:"image/*",style:{visibility:"hidden",display:"none"},onChange:t[13]||(t[13]=function(){return I.uploadImage&&I.uploadImage.apply(I,arguments)}),ref:"uploadImage"},null,544)],512),[[o["J"],!1]]),Object(o["j"])("div",{class:"tool save-image",onClick:t[14]||(t[14]=function(){return I.saveImage&&I.saveImage.apply(I,arguments)})},[C]),Object(o["j"])("div",{class:"tool cancel",onClick:t[15]||(t[15]=function(){return I.cancel&&I.cancel.apply(I,arguments)})},[y])]),Object(o["j"])(S,{canvasWidth:E.width,canvasHeight:E.height,ref:"editor",editorId:"canvasId"},null,8,["canvasWidth","canvasHeight"])])]),Object(o["j"])("div",w,Object(o["F"])(E.strokeWidth),1),Object(o["j"])("div",P,[Object(o["j"])(k,{modelValue:E.strokeWidth,"onUpdate:modelValue":t[16]||(t[16]=function(e){return E.strokeWidth=e}),min:1,max:30,onChange:I.changeStrokeWidth,style:{width:"50%"}},null,8,["modelValue","onChange"])])],64)}var E=n("9a92"),I=n("14f2"),S={name:"ImageEditor",components:{Editor:E["a"],Slider:I["a"]},props:{dataUrl:{type:String,require:!0}},emits:["saveImage","cancel"],data:function(){return{height:0,width:0,imgSrc:"",mode:"",shouldUpdate:!1,colors:["#e40000","#e8eb34","#a834eb","#65c31a","#34b7eb","#eb34df","#1a10ad","#000"],activeColor:"#001",strokeWidth:2}},mounted:function(){this.changeStrokeWidth(),this.$refs.editor.drawImageInEditor(this.dataUrl)},watch:{mode:function(){}},methods:{changeColor:function(e){this.activeColor=e,this.$refs.editor.changeColor(e)},setMode:function(e){this.mode=e,this.$refs.editor.set(e)},undo:function(){var e=this;this.mode="undo",this.$refs.editor.undo(),setTimeout((function(){e.mode=""}),500)},redo:function(){var e=this;this.mode="redo",this.$refs.editor.redo(),setTimeout((function(){e.mode=""}),500)},clear:function(){this.$refs.editor.clear(),this.$refs.editor.drawImageInEditor(this.dataUrl)},saveImage:function(){var e=this.$refs.editor.saveImage();console.log(e),this.$emit("saveImage",e)},saveImageAsFile:function(e){var t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","image-markup"),t.click()},applyCropping:function(){this.mode="",this.$refs.editor.applyCropping()},uploadImage:function(e){this.$refs.editor.uploadImage(e)},changeStrokeWidth:function(){this.$refs.editor.setStrokeWidth(this.strokeWidth)},zoom:function(){this.$refs.editor.setZoom(2)},mobileAndTabletCheck:function(){return window.innerWidth<=800&&window.innerHeight<=600},cancel:function(){this.$emit("cancel")}}};n("eca0");S.render=D;t["a"]=S},"19a7":function(module,__webpack_exports__,__webpack_require__){"use strict";var C_Development_RamAderetYoman_webDev_ramVue_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("5530"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_5__),_components_APoint_textbox_vue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("35f5"),_components_APoint_checkbox_vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("148f"),_components_APoint_dropdown_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("4b1d"),_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("8072"),vuex__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("5502"),_components_QualityControlAdd_vue__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("b6a4"),_components_SelectPlan_vue__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("887d"),primevue_button__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("bb57"),primevue_textarea__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("4c62"),primevue_dialog__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("5bd2"),_components_ImageEditor_vue__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("192d"),_components_QualityControlOpen_vue__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("a67b"),_components_QCReporting_vue__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("b036"),_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("9f4b"),_components_QCreports_vue__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("38d2"),_components_GalleriaFull_vue__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("c4a8");__webpack_exports__["a"]={name:"QualityControl",components:{APointTextbox:_components_APoint_textbox_vue__WEBPACK_IMPORTED_MODULE_6__["a"],APointCheckbox:_components_APoint_checkbox_vue__WEBPACK_IMPORTED_MODULE_7__["a"],APointDropdown:_components_APoint_dropdown_vue__WEBPACK_IMPORTED_MODULE_8__["a"],Button:primevue_button__WEBPACK_IMPORTED_MODULE_13__["a"],QualityControlAdd:_components_QualityControlAdd_vue__WEBPACK_IMPORTED_MODULE_11__["a"],Dialog:primevue_dialog__WEBPACK_IMPORTED_MODULE_15__["a"],Textarea:primevue_textarea__WEBPACK_IMPORTED_MODULE_14__["a"],SelectPlan:_components_SelectPlan_vue__WEBPACK_IMPORTED_MODULE_12__["a"],ImageEditor:_components_ImageEditor_vue__WEBPACK_IMPORTED_MODULE_16__["a"],QualityControlOpen:_components_QualityControlOpen_vue__WEBPACK_IMPORTED_MODULE_17__["a"],QCReporting:_components_QCReporting_vue__WEBPACK_IMPORTED_MODULE_18__["a"],QCreports:_components_QCreports_vue__WEBPACK_IMPORTED_MODULE_20__["a"],GalleriaFull:_components_GalleriaFull_vue__WEBPACK_IMPORTED_MODULE_21__["a"]},props:{qualityControl:{type:Object,require:!1},qcReports:{type:Object,require:!1}},emits:["close","closeReportingAndAddPoto","updateStatus"],data:function(){var e=this;return{fields:[{num:1,apointType:"dropdown",check:!1,required:!0,Caption:"פרויקט:",optionLabel:"ProjectName",optionValue:"ProjectId",showClear:!1,ControlSource:null,RowSource:[],Enabled:!0,Name:"projectId",FuncOnUpdate:function(){e.getField(e.fields_enum.e_zone1).ControlSource=null,e.getField(e.fields_enum.e_zone2).ControlSource=null,e.getField(e.fields_enum.e_zone3).ControlSource=null,e.getField(e.fields_enum.e_responsibles).ControlSource=null,e.getDdlDataLinkedToProject()}},{num:2,apointType:"text",check:!1,required:!1,Caption:"פותח הבקרה:",Format:"",ControlSource:null,Enabled:!0,Locked:!1,Name:"creater_name"},{num:3,apointType:"dropdown",check:!1,required:!0,Caption:"סטטוס:",optionLabel:"status_name",optionValue:"status_id",showClear:!1,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"status",DefaultValue:_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["b"].e_draft,AllRowSource:null},{num:4,apointType:"dropdown",check:!1,required:!0,Caption:"חלל 1:",optionLabel:"project_zone_name",optionValue:"project_zones_id",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"zone1",FuncOnUpdate:function(){e.getField(e.fields_enum.e_zone2).ControlSource=null,e.getField(e.fields_enum.e_zone3).ControlSource=null,e.filterZone2()}},{num:5,apointType:"dropdown",check:!1,required:!0,Caption:"חלל 2:",optionLabel:"project_zone_name",optionValue:"project_zones_id",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"zone2",AllRowSource:null,FuncOnUpdate:function(){e.getField(e.fields_enum.e_zone3).ControlSource=null,e.filterZone3()}},{num:6,apointType:"dropdown",check:!1,required:!1,Caption:"חלל 3:",optionLabel:"project_zone_name",optionValue:"project_zones_id",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"zone3",AllRowSource:null},{num:7,apointType:"dropdown",check:!1,required:!0,Caption:"פרק:",optionLabel:"chapter_name",optionValue:"chapter_id",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"chapter"},{num:8,apointType:"dropdown",check:!1,required:!0,Caption:"אחראי לביצוע:",optionLabel:"user_full_name",optionValue:"user_id",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"responsibles"},{num:9,apointType:"text",check:!1,required:!0,Caption:"יעד לביצוע:",minDate:null,maxDate:null,manualInput:!1,showButtonBar:!0,Format:"Long Date",ControlSource:"",Enabled:!0,Name:"planedDate",showIcon:!0},{num:10,apointType:"dropdown",check:!1,required:!0,Caption:"סוג ליקוי:",optionLabel:"impairment_desc",optionValue:"ID",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"impairment"},{num:11,apointType:"dropdown",check:!1,required:!0,Caption:"רמת חומרה:",optionLabel:"level_desc",optionValue:"ID",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"severityLevel"},{num:12,apointType:"textarea",check:!1,required:!0,Caption:"תיאור:",Format:"",ControlSource:null,Enabled:!0,Locked:!1,Name:"description"},{num:13,apointType:"text",check:!1,required:!1,Caption:"סוגר הבקרה:",Format:"",ControlSource:null,Enabled:!0,Locked:!1,Name:"closed_name"},{num:14,apointType:"text",check:!1,required:!1,Caption:"ת.סגירה:",Format:"",ControlSource:null,Enabled:!0,Locked:!1,Name:"formattedCreate_date"},{num:15,apointType:"text",check:!1,required:!1,Caption:"מספר בקרה:",Format:"",ControlSource:null,Enabled:!0,Locked:!1,Name:"quality_control_id"}],fields_enum:{e_projectId:1,e_creater_name:2,e_status:3,e_zone1:4,e_zone2:5,e_zone3:6,e_chapter:7,e_responsibles:8,e_planedDate:9,e_impairment:10,e_severityLevel:11,e_description:12,e_closed_name:13,e_closed_date:14,e_qc_id:15},qcMode:null,qcModes_enum:{e_new:1,e_open:2,e_close:3},displaySelectPlan:!1,selectedPlan:null,imageEditor:{displayImageEditor:!1,dataUrl:"",fileName:""},displayReporting:!1,isDesktop:!1,attached_files:[],displayAttFiles:!1}},created:function(){this.isDesktop=window.innerWidth>896},mounted:function(){this.getDdlData(),this.getQcData()},methods:{getQcData:function(){var e=this,t="";void 0===this.qualityControl?(this.qcMode=this.qcModes_enum.e_new,t="בקרה חדשה",this.getField(this.fields_enum.e_qc_id).ControlSource=null,1===this.getField(this.fields_enum.e_projectId).RowSource.length&&(this.getField(this.fields_enum.e_projectId).ControlSource=this.getField(this.fields_enum.e_projectId).RowSource[0].ProjectId)):(t="בקרה מס' "+this.qualityControl.quality_control_id,this.qualityControl.status_id===_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["b"].e_close?this.qcMode=this.qcModes_enum.e_close:this.qcMode=this.qcModes_enum.e_open,this.fields.forEach((function(t){switch(t.num){case e.fields_enum.e_qc_id:t.ControlSource=e.qualityControl.quality_control_id;break;case e.fields_enum.e_status:t.ControlSource=e.qualityControl.status_id;break;case e.fields_enum.e_projectId:t.ControlSource=e.qualityControl.project_id;break;case e.fields_enum.e_zone1:t.ControlSource=e.qualityControl.zone_1_id,e.filterZone2();break;case e.fields_enum.e_zone2:t.ControlSource=e.qualityControl.zone_2_id,e.filterZone3();break;case e.fields_enum.e_zone3:t.ControlSource=e.qualityControl.zone_3_id;break;case e.fields_enum.e_chapter:t.ControlSource=e.qualityControl.chapter_id;break;case e.fields_enum.e_responsibles:t.ControlSource=e.qualityControl.responsible_id;break;case e.fields_enum.e_planedDate:t.ControlSource=new Date(e.qualityControl.planed_date);break;case e.fields_enum.e_impairment:t.ControlSource=e.qualityControl.impairment_id;break;case e.fields_enum.e_severityLevel:t.ControlSource=e.qualityControl.hardware_level_id;break;case e.fields_enum.e_description:t.ControlSource=e.qualityControl.quality_control_desc;break;case e.fields_enum.e_closed_name:t.ControlSource=e.qualityControl.closed_name;break;case e.fields_enum.e_closed_date:t.ControlSource=e.qualityControl.formattedCreate_date;break;case e.fields_enum.e_creater_name:t.ControlSource=e.qualityControl.creater_name;break}})),this.getAttachedFiles()),this.$store.commit("main/setAppHeader",t),this.setPermission()},clickFile:function(){this.$refs.evClickFile.click()},uploadImage:function(e){var t=this,n=new FileReader;n.onload=function(e){console.log(e.target.result),t.imageEditor.dataUrl=e.target.result,t.imageEditor.displayImageEditor=!0},this.imageEditor.fileName=e.target.files[0].name,n.readAsDataURL(e.target.files[0])},updateField:function updateField(field,value){field.ControlSource=value,void 0!==field.FuncOnUpdate&&eval(field.FuncOnUpdate())},checkData:function(){var e=!1;return this.fields.forEach((function(t){!t.required||null!=t.ControlSource&&""!=t.ControlSource?t.check=!1:(t.check=!0,e=!0)})),e},getDdlData:function(){var e=this;this.$store.commit("main/setSpinner",{id:_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["c"].e_QualityControl_loadDdl,flag:!0});var t=function(){e.getField(e.fields_enum.e_projectId).RowSource=e.getProjectsUser(),e.getField(e.fields_enum.e_status).AllRowSource=e.getAllStatuses(),e.getField(e.fields_enum.e_status).RowSource=e.getStatus(),e.getField(e.fields_enum.e_chapter).RowSource=e.getChapters(),e.getField(e.fields_enum.e_impairment).RowSource=e.getImpairment(),e.getField(e.fields_enum.e_severityLevel).RowSource=e.getHardwareLevel(),e.getDdlDataLinkedToProject()},n=0,o=setInterval((function(){n++,!1===e.isDataLoaded&&n<3e4||(clearInterval(o),t(),e.$store.commit("main/setSpinner",{id:_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["c"].e_QualityControl_loadDdl,flag:!1}))}),1)},getDdlDataLinkedToProject:function(){var e,t,n,o,i=this.getField(this.fields_enum.e_projectId).ControlSource;e=this.getField(this.fields_enum.e_zone1),t=this.getField(this.fields_enum.e_zone2),n=this.getField(this.fields_enum.e_zone3),o=this.getField(this.fields_enum.e_responsibles),null!==i?(e.RowSource=this.getZone1(i),t.AllRowSource=this.getZone2(i),n.AllRowSource=this.getZone3(i),this.filterZone2(),o.RowSource=this.getResponsibles(i)):(e.RowSource=null,t.AllRowSource=null,n.AllRowSource=null,this.filterZone2(),o.RowSource=null)},saveClose:function(){var e=this,t=function(){e.$toast.add({severity:"success",summary:"הבקרה נוספה בהצלחה",detail:"",life:1e4,closable:!0}),e.$router.push({name:"QualityControls",params:{filter:"ICreated"}})};this.saveData(t)},saveData:function(e){var t=this;if(!0!==this.checkData()){var n=[Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("user_exec",this.userID,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("quality_control_id",this.getField(this.fields_enum.e_qc_id).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("project_id",this.getField(this.fields_enum.e_projectId).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("status_id",this.getField(this.fields_enum.e_status).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("zone_1_id",this.getField(this.fields_enum.e_zone1).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("zone_2_id ",this.getField(this.fields_enum.e_zone2).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("zone_3_id ",this.getField(this.fields_enum.e_zone3).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("chapter_id",this.getField(this.fields_enum.e_chapter).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("quality_control_desc",this.getField(this.fields_enum.e_description).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].NVarChar),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("responsible_id",this.getField(this.fields_enum.e_responsibles).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("planed_date",this.getField(this.fields_enum.e_planedDate).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].SmallDateTime),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("impairment_id",this.getField(this.fields_enum.e_impairment).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("hardware_level_id",this.getField(this.fields_enum.e_severityLevel).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int)];Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["e"])("pr_qc_ins_upd",n).then((function(n){n=JSON.parse(n),console.log("pr_qc_ins_upd-result",n),0===n.procReturnValue?(t.getField(t.fields_enum.e_qc_id).ControlSource=n.Table[0].quality_control_id,e()):t.$toast.add({severity:"error",summary:"שגיאה בעדכון בקרה - פנה לתמיכה",detail:"",life:1e4,closable:!0})})).catch((function(e){t.$toast.add({severity:"error",summary:"שגיאה בעדכון בקרה - פנה לתמיכה",detail:e,life:1e4,closable:!0}),console.log("pr_qc_ins_upd-error",e)}))}},filterZone2:function(){var e=this.getField(this.fields_enum.e_zone1).ControlSource,t=this.getField(this.fields_enum.e_zone2);null!==e&&null!==t.AllRowSource?t.RowSource=t.AllRowSource.filter((function(t){return t.parent_id===e})):t.RowSource=null,this.filterZone3()},filterZone3:function(){var e=this.getField(this.fields_enum.e_zone2).ControlSource,t=this.getField(this.fields_enum.e_zone3);null!==e&&null!==t.AllRowSource?t.RowSource=t.AllRowSource.filter((function(t){return t.parent_id===e})):t.RowSource=null},getField:function(e){return this.fields.find((function(t){return t.num===e}))},getStatus:function(){return this.qcMode===this.qcModes_enum.e_new?this.getField(this.fields_enum.e_status).AllRowSource.filter((function(e){return[_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["b"].e_draft,_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["b"].e_existing_situation,_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["b"].e_reminder].indexOf(e.status_id)>=0})):this.getField(this.fields_enum.e_status).AllRowSource},selectPlan:function(){this.apartmentId>0&&!1===this.checkData()&&(this.selectedPlan=null,this.displaySelectPlan=!0)},displayPlan:function(e){var t=this;console.log("selected plan ",e),this.selectedPlan=e,this.displaySelectPlan=!1,null!=this.selectedPlan&&this.saveData((function(){var n=[Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("user_exec",t.userID,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("plan_id",e.ID,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int)];Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["e"])("pr_qc_get_plan_file_name",n).then((function(e){e=JSON.parse(e),e.Table.length>0&&(t.imageEditor.dataUrl=e.Table[0].fileName,t.imageEditor.fileName=t.selectedPlan.FileName,t.imageEditor.displayImageEditor=!0)})).catch((function(e){console.log("pr_qc_get_plan_file_name-error",e),t.$toast.add({severity:"error",summary:"שגיאה - פנה לתמיכה",detail:e,life:1e4,closable:!0})}))}))},addNewQC:function(){var e=this,t=function(){e.$toast.add({severity:"success",summary:"הבקרה נוספה בהצלחה",detail:"",life:1e4,closable:!0}),e.clearFields()};this.saveData(t)},clearFields:function(){var e=this;this.fields.forEach((function(t){switch(t.num){case e.fields_enum.e_status:t.ControlSource=t.DefaultValue;break;case e.fields_enum.e_projectId:break;default:t.ControlSource=null}})),this.getDdlDataLinkedToProject()},saveImage:function(e){var t,n,o,i,a,r=this,l=function(){r.imageEditor.displayImageEditor=!1,r.imageEditor.dataUrl="",r.imageEditor.fileName=""};if(this.qcMode==this.qcModes_enum.e_close)return this.$toast.add({severity:"warn",summary:"בקרה סגורה- הקובץ לא נשמר",detail:"",life:1e4,closable:!0}),void l();t=_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["a"].e_qualityControl,n=this.getField(this.fields_enum.e_qc_id).ControlSource,o=this.userID,i=this.imageEditor.fileName,a=e,Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["g"])(t,n,o,i,a).then((function(e){!0===e?(r.$toast.add({severity:"success",summary:"הקובץ צורף בהצלחה",detail:"",life:1e4,closable:!0}),r.getAttachedFiles()):r.$toast.add({severity:"error",summary:"שגיאה בצירוף קובץ",detail:"",life:1e4,closable:!0}),console.log("uploadB64-result",e)})).catch((function(e){r.$toast.add({severity:"error",summary:"שגיאה בצירוף קבצים",detail:e,life:1e4,closable:!0}),console.log("uploadB64-error",e)})).then((function(){l()}))},addPoto:function(){var e=this;this.saveData((function(){e.clickFile()}))},setPermission:function(){var e;e=this.qcMode===this.qcModes_enum.e_new,this.fields.forEach((function(t){t.Enabled=e}))},reporting:function(){this.displayReporting=!0},closeReporting:function(e){var t;this.getField(this.fields_enum.e_status).ControlSource=e.status_id,this.getField(this.fields_enum.e_responsibles).ControlSource=e.responsible_id,t=e.status_id===_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["b"].e_close?this.qcModes_enum.e_close:this.qcModes_enum.e_open,t!==this.qcMode&&(this.qcMode=t,this.setPermission()),this.displayReporting=!1},backToParent:function(){this.$emit("close")},closeReportingAndAddPoto:function(e){void 0!==e?this.closeReporting(e):this.displayReporting=!1,void 0!==this.qualityControl&&this.isDesktop?this.$emit("closeReportingAndAddPoto",e):this.clickFile()},attFiles:function(){this.attached_files&&this.attached_files.length>0?this.displayAttFiles=!0:this.$toast.add({severity:"warn",summary:"קבצים מצורפים",detail:"אין נתונים להצגה",life:1e4,closable:!0})},openCloseQC:function(){var e=this;this.getField(this.fields_enum.e_status).ControlSource=_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["b"].e_open,this.saveData((function(){e.qcMode=e.qcModes_enum.e_open,e.setPermission(),e.$emit("updateStatus",e.getField(e.fields_enum.e_qc_id).ControlSource,_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["b"].e_open)}))},getAttachedFiles:function(){var e=this,t=[Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("user_exec",this.userID,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int),Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["d"])("quality_control_id",this.getField(this.fields_enum.e_qc_id).ControlSource,_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["c"].Int)];Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["e"])("pr_qc_get_attached_files",t).then((function(t){t=JSON.parse(t),e.attached_files=t.Table})).catch((function(t){e.$toast.add({severity:"error",summary:"שגיאה בהבאת קבצים מצורפים - פנה לתמיכה",detail:t,life:1e4,closable:!0}),console.log("pr_qc_get_attached_files-error",t)}))}},computed:Object(C_Development_RamAderetYoman_webDev_ramVue_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(C_Development_RamAderetYoman_webDev_ramVue_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({detailsFields:function(){var e=this;switch(this.qcMode){case this.qcModes_enum.e_close:return this.fields.filter((function(t){return t.num<e.fields_enum.e_qc_id}));case this.qcModes_enum.e_open:return this.fields.filter((function(t){return t.num<e.fields_enum.e_closed_name}));default:return this.fields.filter((function(t){return t.num<e.fields_enum.e_closed_name&&t.num!==e.fields_enum.e_creater_name}))}},apartmentId:function(){var e=this,t=this.getField(this.fields_enum.e_zone2).AllRowSource;if(void 0===t||null===t)return 0;var n=t.find((function(t){return t.project_zones_id===e.getField(e.fields_enum.e_zone2).ControlSource}));return void 0===n?0:Object(_services_APointAPI__WEBPACK_IMPORTED_MODULE_9__["a"])(n.apartment_id)},qcObject:function(){return{quality_control_id:this.getField(this.fields_enum.e_qc_id).ControlSource,project_id:this.getField(this.fields_enum.e_projectId).ControlSource,status_id:this.getField(this.fields_enum.e_status).ControlSource,zone_1_id:this.getField(this.fields_enum.e_zone1).ControlSource,zone_2_id:this.getField(this.fields_enum.e_zone2).ControlSource,zone_3_id:this.getField(this.fields_enum.e_zone3).ControlSource,chapter_id:this.getField(this.fields_enum.e_chapter).ControlSource,responsible_id:this.getField(this.fields_enum.e_responsibles).ControlSource,planed_date:this.getField(this.fields_enum.e_planedDate).ControlSource,impairment_id:this.getField(this.fields_enum.e_impairment).ControlSource,hardware_level_id:this.getField(this.fields_enum.e_severityLevel).ControlSource,quality_control_desc:this.getField(this.fields_enum.e_description).ControlSource}},images:function(){return this.attached_files.map((function(e){return{ID:e.ID,itemImageSrc:e.fileName,thumbnailImageSrc:e.fileName,alt:e.SrcFile,title:e.SrcFile}}))}},Object(vuex__WEBPACK_IMPORTED_MODULE_10__["c"])({userID:function(e){return+e.api.userID},isDataLoaded:function(e){return e.qc.isDataLoaded}})),Object(vuex__WEBPACK_IMPORTED_MODULE_10__["b"])({getAllStatuses:"qc/getStatuses",getZone1:"qc/getZone1",getZone2:"qc/getZone2",getZone3:"qc/getZone3",getChapters:"qc/getChapters",getResponsibles:"qc/getResponsibles",getImpairment:"qc/getImpairment",getHardwareLevel:"qc/getHardwareLevel",getAllUsers:"qc/getAllUsers",getNotDone:"qc/getNotDone",getProjectsUser:"qc/getProjectsUser"})),watch:{qualityControl:function(){this.getQcData()}},unmounted:function(){this.$store.commit("main/setSpinner",{id:_scripts_enums_js__WEBPACK_IMPORTED_MODULE_19__["c"].e_QualityControl_loadDdl,flag:!1})}}},"1d2e":function(e,t,n){"use strict";n("07e3")},"1d3d":function(e,t,n){},"1f2b":function(e,t,n){},"1f3d":function(e,t,n){"use strict";n("e9e2")},2:function(e,t){},"215e":function(e,t,n){"use strict";n("f17a")},"24d1":function(e,t,n){"use strict";n("002a")},"255c":function(e,t,n){},"257b":function(e,t,n){e.exports=n.p+"assets/img/item-menu-0.2322e183.png"},"2f00":function(e,t,n){e.exports=n.p+"assets/img/item-0.b360bcfa.png"},3:function(e,t){},3098:function(e,t,n){e.exports=n.p+"assets/img/item-sm-1.b6ad360b.png"},"34fd":function(e,t,n){e.exports=n.p+"assets/img/item-sm-4.a1c74903.png"},"35f5":function(e,t,n){"use strict";var o=n("7a23");function i(e,t,n,i,a,r){var l=Object(o["B"])("InputText"),c=Object(o["B"])("Calendar"),s=Object(o["B"])("InputNumber");return Object(o["t"])(),Object(o["f"])(o["a"],null,[""==n.field.Format?(Object(o["t"])(),Object(o["f"])(l,{key:0,type:"text",disabled:!n.field.Enabled||n.field.Locked,onInput:t[1]||(t[1]=function(e){return r.emitInputs(e.target.value)}),value:n.modelValue,class:n.field.required&&n.field.check?"p-invalid":""},null,8,["disabled","value","class"])):Object(o["g"])("",!0),r.date?(Object(o["t"])(),Object(o["f"])(c,{key:1,dateFormat:r.date.primeVue,minDate:n.field.minDate,maxDate:n.field.maxDate,manualInput:n.field.manualInput,disabled:!n.field.Enabled||n.field.Locked,showButtonBar:n.field.showButtonBar,onDateSelect:t[2]||(t[2]=function(e){return r.emitInputs(e)}),onChange:t[3]||(t[3]=function(e){return r.emitInputs(e.target.value)}),onClearClick:t[4]||(t[4]=function(e){return r.emitInputs(e.target.value)}),value:n.modelValue,modelValue:a.value,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.value=e}),showIcon:n.field.showIcon,class:[n.field.required&&n.field.check?"p-invalid":"","calandar"]},null,8,["dateFormat","minDate","maxDate","manualInput","disabled","showButtonBar","value","modelValue","showIcon","class"])):Object(o["g"])("",!0),r.number?(Object(o["t"])(),Object(o["f"])(s,{key:2,mode:r.number.primeVue,useGrouping:n.field.useGrouping,disabled:!n.field.Enabled||n.field.Locked,onInput:t[6]||(t[6]=function(e){return r.emitInputs(e.value)}),value:n.modelValue,minFractionDigits:n.field.minFractionDigits,maxFractionDigits:n.field.maxFractionDigits,min:n.field.min,max:n.field.max,currency:n.field.currency,locale:n.field.locale,currencyDisplay:n.field.currencyDisplay,suffix:n.field.suffix,prefix:n.field.prefix,inputClass:n.field.required&&n.field.check?"p-invalid":""},null,8,["mode","useGrouping","disabled","value","minFractionDigits","maxFractionDigits","min","max","currency","locale","currencyDisplay","suffix","prefix","inputClass"])):Object(o["g"])("",!0)],64)}n("7db0");var a=n("cb8b"),r=n("3822"),l=n("8398"),c={dateFormats:[{access:"General Date",primeVue:"mm-dd-yy"},{access:"Long Date",primeVue:"dd/mm/yy"},{access:"Medium Date",primeVue:""},{access:"Short Date",primeVue:""},{access:"Long Time",primeVue:""},{access:"Medium Time",primeVue:""},{access:"Short Time",primeVue:""}],numberFormats:[{access:"General Number",primeVue:"decimal"},{access:"Currency",primeVue:"currency"},{access:"Euro",primeVue:""},{access:"Fixed",primeVue:""},{access:"Standard",primeVue:""},{access:"Percent",primeVue:""}]},s={name:"APoint-textbox",components:{Calendar:a["a"],InputNumber:r["a"],InputText:l["a"]},props:{field:{type:Object},modelValue:{}},emits:["update:modelValue"],data:function(){return{value:null}},computed:{date:function(){var e=this;return c.dateFormats.find((function(t){return e.field.Format==t.access}))},number:function(){var e=this;return c.numberFormats.find((function(t){return e.field.Format==t.access}))}},mounted:function(){this.value=this.modelValue},methods:{emitInputs:function(e){this.$emit("update:modelValue",e)}},watch:{modelValue:function(e){this.value=e}}};n("58e6");s.render=i;t["a"]=s},"37ef":function(e,t,n){e.exports=n.p+"assets/img/item-detail.4b020f76.png"},"38d2":function(e,t,n){"use strict";var o=n("7a23"),i=Object(o["P"])("data-v-c5c7f9ee");Object(o["w"])("data-v-c5c7f9ee");var a={class:"p-m-2"},r=Object(o["j"])("label",{for:"reports"},"מה בוצע:",-1),l={id:"reports",class:"qcReports "},c={style:{display:"flex","justify-content":"space-between"}},s={class:"p-text-bold"};Object(o["u"])();var u=i((function(e,t,n,i,u,d){return Object(o["t"])(),Object(o["f"])("div",a,[r,Object(o["j"])("div",l,[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(n.QCreports,(function(e){return Object(o["t"])(),Object(o["f"])("div",{key:e.quality_control_reporting_id,class:"single_report p-m-2"},[Object(o["j"])("div",c,[Object(o["j"])("div",null,Object(o["F"])(e.user_full_name),1),Object(o["j"])("div",null,Object(o["F"])(e.format_create_date),1)]),Object(o["j"])("div",s,Object(o["F"])(e.action_performed),1)])})),128))])])})),d={name:"QCreports",props:{QCreports:{type:Object,required:!0}},methods:{}};n("24d1");d.render=u,d.__scopeId="data-v-c5c7f9ee";t["a"]=d},4:function(e,t){},4340:function(e,t,n){"use strict";n("976c")},4360:function(e,t,n){"use strict";var o,i=n("ade3"),a=(n("07ac"),n("5502")),r=(n("b64b"),{namespaced:!0,state:{userName:"",pswd:"",userID:0,compGUID:"",compID:0,sessionToken:"",tokenCreated:null,webPswd:""},mutations:{setSessionData:function(e,t){for(var n=0,o=Object.keys(t);n<o.length;n++){var i=o[n];e[i]=t[i]}},setCompGuid:function(e,t){e.compGUID=t},resetToken:function(e){e.sessionToken="",e.tokenCreated=null},setToken:function(e,t){e.sessionToken=t,e.tokenCreated=new Date}},actions:{getCompGuidFromSecureCookie:function(e,t){var n=e.commit;n("setCompGuid",t)}},modules:{},getters:{isLoggedIn:function(e){return""!==e.sessionToken&&""!==e.compGUID}}}),l=(n("4de4"),n("d81d"),n("7db0"),n("8072")),c={namespaced:!0,state:{statuses:[],zone1:[],zone2:[],zone3:[],chapters:[],responsibles:[],impairment:[],hardware_level:[],allUsers:[],notDone:[],projectsUser:[],timeOut:36e5,timeOutId:null,isDataLoaded:!1},mutations:{},actions:{loadDdlData:function(e){var t=this,n=e.state,o=e.dispatch;null!==n.timeOut&&clearTimeout(n.timeOutId),n.timeOutId=setTimeout((function(){o("loadDdlData")}),n.timeOut);var i=[Object(l["d"])("user_exec",r.state.userID,l["c"].Int)];Object(l["e"])("pr_qc_ddl_data",i).then((function(e){e=JSON.parse(e),e.Table.length>0&&(n.statuses=e.Table),e.Table1.length>0&&(n.zone1=e.Table1),e.Table2.length>0&&(n.zone2=e.Table2),e.Table3.length>0&&(n.zone3=e.Table3),e.Table4.length>0&&(n.chapters=e.Table4),e.Table5.length>0&&(n.responsibles=e.Table5),e.Table6.length>0&&(n.impairment=e.Table6),e.Table7.length>0&&(n.hardware_level=e.Table7),e.Table8.length>0&&(n.allUsers=e.Table8),e.Table9.length>0&&(n.notDone=e.Table9),e.Table10.length>0&&(n.projectsUser=e.Table10)})).catch((function(e){console.log("pr_qc_ddl_data-error-store",e),t.$toast.add({severity:"error",summary:"שגיאה - פנה לתמיכה",detail:e,life:1e4,closable:!0})})).then((function(){n.isDataLoaded=!0}))}},getters:{getStatuses:function(e){return function(){return e.statuses}},getZone1:function(e){return function(t){return t>0?e.zone1.filter((function(e){return e.project_id===t})):e.zone1}},getZone2:function(e){return function(t){return t>0?e.zone2.filter((function(e){return e.project_id===t})):e.zone2}},getZone3:function(e){return function(t){return t>0?e.zone3.filter((function(e){return e.project_id===t})):e.zone3}},getChapters:function(e){return function(){return e.chapters}},getResponsibles:function(e){return function(t){var n=e.responsibles;return t>0&&(n=n.filter((function(e){return e.project_id===t}))),n=n.map((function(e){return e.user_id})).filter((function(e,t,n){return n.indexOf(e)===t&&""!==e})),n.map((function(t){return{user_id:t,user_full_name:e.responsibles.find((function(e){return e.user_id===t})).user_full_name}})).sort((function(e,t){return e.user_full_name.toLocaleLowerCase()<t.user_full_name.toLocaleLowerCase()?-1:e.user_full_name.toLocaleLowerCase()>t.user_full_name.toLocaleLowerCase()?1:0}))}},getImpairment:function(e){return function(){return e.impairment}},getHardwareLevel:function(e){return function(){return e.hardware_level}},getAllUsers:function(e){return function(){return e.allUsers}},getNotDone:function(e){return function(){return e.notDone}},getProjectsUser:function(e){return function(){return e.projectsUser}}}},s=n("9f4b"),u={namespaced:!0,state:{isDev:function(){return"localhost"===window.location.host.substring(0,9)},baseHost:function(){return this.isDev()?"https://ramaderet.apoint.co.il/":""},menu:["הדירה שלי ","מצב חשבון ","תיאום אדריכלי","מחלקת הבדק","חדשות ומבצעים"," צור קשר","נסיון הוספת "],showMenu:!1,appHeader:"",displaySpinner:!1,displaySpinnerObj:(o={},Object(i["a"])(o,s["c"].e_testLogin,!1),Object(i["a"])(o,s["c"].e_QCReporting_loadDdl,!1),Object(i["a"])(o,s["c"].e_QualityControlsFilters_loadDdl,!1),Object(i["a"])(o,s["c"].e_QualityControl_loadDdl,!1),Object(i["a"])(o,s["c"].e_QualityControls_loadAttFiles,!1),o)},mutations:{setShowMenu:function(e,t){return e.showMenu=t},setSpinner:function(e,t){e.displaySpinnerObj[t.id]=t.flag;var n=!1;t.flag?n=!0:Object.values(e.displaySpinnerObj).every((function(e){return!e||(n=!0,!1)})),e.displaySpinner=n},setAppHeader:function(e,t){e.appHeader!==t&&(e.appHeader=t)}},actions:{toggleMenuShow:function(e,t){var n=e.commit,o=e.getters;n("setShowMenu",t||!o.getShowMenu)}},modules:{},getters:{getMenu:function(e){return e.menu},getShowMenu:function(e){return e.showMenu}}};t["a"]=Object(a["a"])({modules:{api:r,main:u,qc:c}})},4443:function(e,t,n){},"48a6":function(e,t,n){e.exports=n.p+"assets/img/icons.6a4de7d6.svg"},"493b":function(e,t,n){"use strict";n("d392")},"4a9b":function(e,t,n){},"4b1d":function(e,t,n){"use strict";var o=n("7a23");function i(e,t,n,i,a,r){var l=Object(o["B"])("Dropdown");return Object(o["t"])(),Object(o["f"])(l,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.value=e}),options:n.field.RowSource,optionLabel:n.field.optionLabel,optionValue:n.field.optionValue,showClear:n.field.showClear,disabled:!n.field.Enabled||n.field.Locked,onChange:t[2]||(t[2]=function(e){return r.emitInputs(e.value)}),class:n.field.required&&n.field.check?"p-invalid":"",filter:null!==n.field.RowSource&&void 0!==n.field.RowSource&&n.field.RowSource.length>10},null,8,["modelValue","options","optionLabel","optionValue","showClear","disabled","class","filter"])}var a=n("0100"),r={name:"APoint-dropdown",components:{Dropdown:a["a"]},props:{field:{type:Object},modelValue:{}},emits:["update:modelValue"],data:function(){return{value:null}},methods:{emitInputs:function(e){this.value=e,this.$emit("update:modelValue",e)}},mounted:function(){this.value=this.modelValue,void 0===this.field.DefaultValue||void 0!==this.modelValue&&null!==this.modelValue||this.emitInputs(this.field.DefaultValue)},watch:{modelValue:function(e){this.value=e}}};r.render=i;t["a"]=r},"4ffd":function(e,t,n){e.exports=n.p+"assets/img/logo.fac9c000.png"},5:function(e,t){},5560:function(e,t,n){e.exports=n.p+"assets/img/item-menu-3.b2b294d4.png"},"55d2":function(e,t,n){"use strict";n("1557")},"55dd":function(e,t,n){"use strict";n("ad20")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),i={class:"block"};function a(e,t,n,a,r,l){var c=Object(o["B"])("ProgressSpinner"),s=Object(o["B"])("Main"),u=Object(o["B"])("Login");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["M"])(Object(o["j"])("div",i,[e.displaySpinner?(Object(o["t"])(),Object(o["f"])(c,{key:0,class:"spinner"})):Object(o["g"])("",!0)],512),[[o["J"],e.displaySpinner]]),Object(o["j"])("div",{class:["layout-rtl ",{mainApp:!0===e.isLoggedIn&&l.isDesktop}]},[e.isLoggedIn?(Object(o["t"])(),Object(o["f"])(s,{key:0})):(Object(o["t"])(),Object(o["f"])(u,{key:1,allowAutoLogin:!0,logoImgSrc:r.logoImgSrc,compName:r.compName,compGUID:e.compGUID,loginHeader:"כניסה רם קונטרול"},null,8,["logoImgSrc","compName","compGUID"]))],2)],64)}var r=n("5530"),l=n("5502"),c=n("4ffd"),s=n.n(c),u={class:"p-d-flex p-ai-center p-jc-center",dir:"rtl"},d={class:"p-d-flex p-flex-column p-ai-center p-jc-center"},_={class:"p-field p-grid"},p=Object(o["j"])("label",{class:"p-col-fixed lbl-style",for:"userName"},"משתמש",-1),m={class:"p-col"},f={class:"p-field p-grid"},b=Object(o["j"])("label",{class:"p-col-fixed lbl-style",for:"userName"},"סיסמה",-1),j={class:"p-col"},h={class:"p-field-checkbox p-grid"},O=Object(o["j"])("label",{class:"p-col-fixed lbl-style",for:"rememberMe"},"זכור אותי",-1),g={class:"p-col"},v=Object(o["i"])("כניסה");function C(e,t,n,i,a,r){var l=Object(o["B"])("InputText"),c=Object(o["B"])("Password"),C=Object(o["B"])("CheckBox"),y=Object(o["B"])("Button"),w=Object(o["B"])("Toast");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["j"])("div",u,[Object(o["j"])(o["b"],{name:"fade"},{default:Object(o["L"])((function(){return[Object(o["j"])("div",null,[Object(o["j"])("div",d,[Object(o["j"])("img",{src:s.a,alt:n.compName,class:"logo-style"},null,8,["alt"])]),Object(o["j"])("h1",null,Object(o["F"])(n.loginHeader),1),Object(o["j"])("div",_,[p,Object(o["j"])("div",m,[Object(o["j"])(l,{type:"text",name:"userName",modelValue:a.userName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.userName=e}),modelModifiers:{trim:!0}},null,8,["modelValue"])])]),Object(o["j"])("div",f,[b,Object(o["j"])("div",j,[Object(o["j"])(c,{modelValue:a.password,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.password=e}),modelModifiers:{lazy:!0},onKeypress:Object(o["N"])(r.login,["enter"]),feedback:!1},null,8,["modelValue","onKeypress"])])]),Object(o["j"])("div",h,[O,Object(o["j"])("div",g,[Object(o["j"])(C,{modelValue:a.rememberMe,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.rememberMe=e}),binary:!0},null,8,["modelValue"])])]),Object(o["j"])(y,{class:"p-field",onClick:r.login},{default:Object(o["L"])((function(){return[v]})),_:1},8,["onClick"])])]})),_:1})]),Object(o["j"])(w,{position:"bottom-right"})],64)}var y=n("1da1"),w=(n("96cf"),n("8398")),P=n("a034"),D=n("bb57"),E=n("2052"),I=n("8072"),S=n("9f4b"),k={name:"Login",props:{allowAutoLogin:{type:Boolean,default:!1},compName:{type:String,default:"A Point Systems"},loginHeader:{type:String,default:"כניסה למערכת "},logoImgSrc:{type:String,default:"/assets/img/Logo.jpg"},compGUID:{type:String,require:!0}},components:{InputText:w["a"],Button:D["a"],CheckBox:E["a"],Password:P["a"]},data:function(){return{userName:"",password:"",rememberMe:!1}},methods:{autoLogin:function(){if(
//!בוצעו שינויים בפונקציה זו על מנת לעבוד עם האפליקציה הישנה
this.$store.commit("main/setSpinner",{id:S["c"].e_testLogin,flag:!0}),this.rememberMe=!0,this.rememberMe&&this.compGUID){var e=this.$cookie.getCookie("qcAppCookie");this.userName=e.userName,//! TODO error: test auto login feature
this.allowAutoLogin?(this.password=e.pswd,""!==this.password?(console.log("auto login"),this.login()):this.$store.commit("main/setSpinner",{id:S["c"].e_testLogin,flag:!1})):this.$store.commit("main/setSpinner",{id:S["c"].e_testLogin,flag:!1})}else this.rememberMe||this.$store.commit("main/setSpinner",{id:S["c"].e_testLogin,flag:!1})},validateLogin:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(I["b"])(e.compGUID,e.userName,e.password);case 2:return n=t.sent,t.abrupt("return",0!==n);case 4:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateLogin();case 2:if(!t.sent){t.next=8;break}e.rememberMe&&e.$cookie.setCookie("main-user-object",Object(I["f"])({userName:e.userName,pswd:e.allowAutoLogin?e.password:""},e.compGUID)),e.$cookie.setCookie("main-user-remember",e.rememberMe),e.$store.commit("main/setSpinner",{id:S["c"].e_testLogin,flag:!1}),t.next=10;break;case 8:e.$toast.add({severity:"error",summary:"כשל כניסה",detail:"משתמש או סיסמה לא נכונים",life:3e3,closable:!0}),e.$store.commit("main/setSpinner",{id:S["c"].e_testLogin,flag:!1});case 10:case"end":return t.stop()}}),t)})))()}},watch:{compGUID:function(){this.autoLogin()}},mounted:function(){this.autoLogin()},unmounted:function(){this.$store.commit("main/setSpinner",{id:S["c"].e_testLogin,flag:!1})}};n("0e0b");k.render=C;var A=k,M=Object(o["P"])("data-v-017df482");Object(o["w"])("data-v-017df482");var F={class:"router-view",style:{overflow:"scroll"}};Object(o["u"])();var R=M((function(e,t,n,i,a,r){var l=Object(o["B"])("c-header"),c=Object(o["B"])("c-mobile-menu"),s=Object(o["B"])("router-view"),u=Object(o["B"])("Toast");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["j"])(l,{class:"c-header"}),Object(o["j"])(c),Object(o["j"])("div",F,[Object(o["j"])(s)]),Object(o["j"])(u,{position:"bottom-right",baseZIndex:2e3})],64)})),T=n("5d57"),q=n.n(T),B=Object(o["P"])("data-v-2212095a");Object(o["w"])("data-v-2212095a");var L={class:"sidebar-body"},U=Object(o["j"])("h3",null,"תפריט",-1),x={key:0,class:"header-logo"},V=Object(o["j"])("img",{src:q.a,alt:"Logo"},null,-1),W={role:"navigation"};Object(o["u"])();var N=B((function(e,t,n,i,a,r){var l=Object(o["B"])("c-icon"),c=Object(o["B"])("router-link"),s=Object(o["B"])("PanelMenu"),u=Object(o["B"])("c-sidebar");return Object(o["t"])(),Object(o["f"])(u,{position:"right",visible:r.showMenu,showCloseIcon:!1,modal:!1,class:"sidebar p-sidebar-right "},{default:B((function(){return[r.showCancle?(Object(o["t"])(),Object(o["f"])("a",{key:0,href:"#toggle-menu",class:"sidebar-close",onClick:t[1]||(t[1]=Object(o["O"])((function(t){return e.$store.dispatch("main/toggleMenuShow",!1)}),["prevent"]))},[Object(o["j"])(l,{name:"cancel",style:{}})])):Object(o["g"])("",!0),Object(o["j"])("div",L,[U,r.showLogo?(Object(o["t"])(),Object(o["f"])("div",x,[Object(o["j"])(c,{to:"/"},{default:B((function(){return[V]})),_:1})])):Object(o["g"])("",!0),Object(o["j"])("nav",W,[Object(o["j"])(s,{model:a.items,alwaysOpen:!0},null,8,["model"])])])]})),_:1},8,["visible"])})),z=n("4360"),K=n("032f"),$=n("6c02"),Q={id:"detail",class:"section section--auth"};function H(e,t,n,i,a,r){var l=Object(o["B"])("c-header"),c=Object(o["B"])("c-all-items"),s=Object(o["B"])("c-detail-item"),u=Object(o["B"])("c-footer");return Object(o["t"])(),Object(o["f"])("section",Q,[Object(o["j"])(l,{icon:!0}),Object(o["j"])(c,{mode:"menu"}),Object(o["j"])(s),Object(o["j"])(u)])}var Z=Object(o["P"])("data-v-2376528b");Object(o["w"])("data-v-2376528b");var G={id:"header",class:"header"},J={class:"header-top"},Y={class:"p-d-flex p-ai-center space-evenly"},X={key:0,class:"header-logo"},ee=Object(o["j"])("img",{src:q.a,alt:"Logo"},null,-1);Object(o["u"])();var te=Z((function(e,t,n,i,a,r){var l=Object(o["B"])("c-icon"),c=Object(o["B"])("router-link");return Object(o["t"])(),Object(o["f"])("header",G,[Object(o["j"])("div",J,[Object(o["j"])("div",Y,[Object(o["j"])("div",null,[Object(o["j"])("a",{href:"#toggle-menu",class:"toggle-menu",onClick:t[1]||(t[1]=Object(o["O"])((function(){return r.toggleMenu&&r.toggleMenu.apply(r,arguments)}),["prevent"]))},[Object(o["j"])(l,{name:"menu"})])]),Object(o["j"])("h1",null,Object(o["F"])(e.appHeader),1),Object(o["j"])("div",null,[r.showLogo?(Object(o["t"])(),Object(o["f"])("div",X,[Object(o["j"])(c,{to:"/"},{default:Z((function(){return[ee]})),_:1})])):Object(o["g"])("",!0)])])])])})),ne=n("ade3"),oe=(n("b0c0"),n("99af"),Object(o["P"])("data-v-ee1770ec")),ie=oe((function(e,t,n,i,a,r){return Object(o["t"])(),Object(o["f"])("svg",{class:Object(ne["a"])({svg:!0},"svg--".concat(e.$props.name),e.$props.name)},[Object(o["j"])("use",{"xlink:href":"".concat(i.icons,"#").concat(e.$props.name)},null,8,["xlink:href"])],2)})),ae=n("48a6"),re=n.n(ae),le={name:"c-icon",props:{name:{type:String,default:null}},setup:function(){return{icons:re.a}}};n("1d2e");le.render=ie,le.__scopeId="data-v-ee1770ec";var ce=le,se={isTablet:function(){var e=window.innerWidth;return e<=1024&&e>640},isDesktop:function(){return window.innerWidth>896},isMobile:function(){return window.innerWidth<=1025}},ue={name:"c-header",props:{icon:{type:Boolean,default:!1}},components:{CIcon:ce},data:function(){return{}},methods:{toggleMenu:function(){this.$store.dispatch("main/toggleMenuShow",!0)}},computed:Object(r["a"])({showLogo:function(){return se.isDesktop()}},Object(l["c"])({appHeader:function(e){return e.main.appHeader}}))};n("8c13");ue.render=te,ue.__scopeId="data-v-2376528b";var de=ue,_e=n("8ddf"),pe=n.n(_e),me=Object(o["P"])("data-v-4e87a726");Object(o["w"])("data-v-4e87a726");var fe={id:"footer",class:"footer p-pb-5"},be={key:0,class:"footer-social p-grid p-ai-center p-jc-center p-m-0 p-p-0"},je=Object(o["j"])("div",{class:"p-text-center p-mt-3"},"רם אדרת. © כל הזכויות שמורות",-1),he=Object(o["j"])("div",{class:"p-d-flex p-ai-baseline p-jc-center",style:{"font-size":"12px"}},[Object(o["j"])("div",{class:"p-d-flex p-ai-center"},[Object(o["j"])("span",{class:"p-order-3"},"Powered by"),Object(o["j"])("img",{src:pe.a,class:"footer-logo p-order-2"}),Object(o["j"])("a",{class:"p-order-1",href:"https://www.apoint.co.il",target:"_blank"},"A Point Systems ltd")])],-1);Object(o["u"])();var Oe=me((function(e,t,n,i,a,r){var l=Object(o["B"])("c-icon");return Object(o["t"])(),Object(o["f"])("footer",fe,["social"==e.$props.screen?(Object(o["t"])(),Object(o["f"])("ul",be,[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(i.socials,(function(e,t){return Object(o["t"])(),Object(o["f"])("li",{key:t,class:"p-col-fixed"},[Object(o["j"])("a",{href:e.href,target:"_blank",class:"p-d-flex p-ai-center p-jc-center"},[Object(o["j"])(l,{name:e.icon},null,8,["name"])],8,["href"])])})),128))])):Object(o["g"])("",!0),je,he])})),ge={name:"c-footer",props:{screen:{type:String,default:"default"}},components:{CIcon:ce},setup:function(){var e=[{icon:"instagram",href:"//instagram.com"},{icon:"facebook",href:"//fb.com"},{icon:"facebook",href:"//fb.com"}];return{socials:e}}};n("9492");ge.render=Oe,ge.__scopeId="data-v-4e87a726";var ve=ge,Ce=Object(o["P"])("data-v-0746dce6");Object(o["w"])("data-v-0746dce6");var ye={class:"p-grid p-jc-center p-m-0"},we={class:"item-name p-text-center p-m-0"};Object(o["u"])();var Pe=Ce((function(e,t,n,i,a,r){var l=Object(o["B"])("router-link");return Object(o["t"])(),Object(o["f"])("nav",{class:Object(ne["a"])({items:!0},"items-".concat(e.$props.mode),e.$props.mode),role:"navigation"},[Object(o["j"])("ul",ye,[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(i.items,(function(e,t){return Object(o["t"])(),Object(o["f"])("li",{key:t,class:"p-col-6 p-sm-4 p-md-3 p-lg-2"},[Object(o["j"])(l,{to:"/detail/".concat(t),class:"item"},{default:Ce((function(){return[Object(o["j"])("img",{alt:e,src:i.thumbnail(t),class:"item-thumbnail"},null,8,["alt","src"]),Object(o["j"])("img",{alt:e,src:i.thumbnail(t,"sm"),class:"item-thumbnail item-thumbnail-sm"},null,8,["alt","src"]),Object(o["j"])("h3",we,Object(o["F"])(e),1)]})),_:2},1032,["to"])])})),128))])],2)})),De={props:{mode:{type:String,default:null}},setup:function(e){var t=Object(l["d"])(),i=Object(o["d"])((function(){return t.getters["main/getMenu"]})),a=function(t,o){var i=o?"".concat(o,"-"):e.mode?"".concat(e.mode,"-"):"";return n("6ded")("./item-".concat(i).concat(t,".png"))};return{items:i,thumbnail:a}}};n("55dd");De.render=Pe,De.__scopeId="data-v-0746dce6";var Ee=De,Ie=Object(o["P"])("data-v-7f6e5192");Object(o["w"])("data-v-7f6e5192");var Se={class:"item p-mx-auto p-overflow-hidden"},ke={class:"p-grid p-jc-between additional-data p-pt-1"},Ae={key:0,class:"p-d-flex p-flex-wrap"},Me={key:2,class:"p-d-flex p-ai-center"},Fe={key:3},Re={class:"contacts p-text-center p-pt-6"},Te=Object(o["j"])("h3",{class:"p-m-0"},"מתאם/ת אדריכלי",-1),qe={class:"p-d-inline-flex p-pt-2 p-mb-0 p-mt-3 p-px-0"},Be={class:"p-d-inline-flex p-ai-center"};Object(o["u"])();var Le=Ie((function(e,t,n,i,a,r){var l=Object(o["B"])("c-carousel"),c=Object(o["B"])("c-icon");return Object(o["t"])(),Object(o["f"])("div",Se,[Object(o["j"])(l,{numScroll:1,numVisible:1,value:i.carousel,page:i.carousel.length-1,class:"effect--shadow"},{item:Ie((function(e){return[Object(o["j"])("img",{src:e.data,alt:e.data,class:"thumbnail"},null,8,["src","alt"])]})),_:1},8,["value","page"]),Object(o["j"])("div",ke,[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(i.additional,(function(e,t){return Object(o["t"])(),Object(o["f"])("div",{key:t,class:{"p-col-fixed":e.list.length<2,"p-col":!(e.list.length<2)}},[Object(o["j"])("h4",{class:{"p-m-0":!0,"no-heading":!e.heading}},Object(o["F"])(e.heading||"-"),3),e.list?(Object(o["t"])(),Object(o["f"])("div",Ae,[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(e.list,(function(t,n){return Object(o["t"])(),Object(o["f"])("ul",{key:n,class:{"p-p-0":!0,"p-m-0":!0,"p-col-12":!0,"p-sm-6":!(e.list.length<2),"p-md-4":!(e.list.length<2)}},[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(t,(function(e,t){return Object(o["t"])(),Object(o["f"])("li",{key:t,class:"p-d-flex p-ai-center p-mt-3"},[e.icon?(Object(o["t"])(),Object(o["f"])(c,{key:0,name:e.icon,class:"p-ml-2"},null,8,["name"])):Object(o["g"])("",!0),e.href?(Object(o["t"])(),Object(o["f"])("a",{key:1,href:e.href},Object(o["F"])(e.label),9,["href"])):e.label?(Object(o["t"])(),Object(o["f"])("label",Me,Object(o["F"])(e.label),1)):Object(o["g"])("",!0),e.value?(Object(o["t"])(),Object(o["f"])("span",Fe,Object(o["F"])(e.value),1)):Object(o["g"])("",!0)])})),128))],2)})),128))])):Object(o["g"])("",!0)],2)})),128))]),Object(o["j"])("div",Re,[Te,Object(o["j"])("ul",qe,[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(i.contacts,(function(e,t){return Object(o["t"])(),Object(o["f"])("li",{key:t},[Object(o["j"])("label",Be,Object(o["F"])(e.label),1),Object(o["j"])("span",null,Object(o["F"])(e.value),1)])})),128))])])])})),Ue=n("0f7d"),xe={components:{CIcon:ce,CCarousel:Ue["a"]},setup:function(){var e=[n("37ef"),n("37ef"),n("37ef"),n("37ef"),n("37ef")],t=[{heading:"פרטי הדירה",list:[[{value:7,label:"קומה"},{value:5,label:"חדרים"},{label:'מ"ר',value:124.8},{label:"כיוונים",value:"צפון, מזרח"}],[{value:"אמבטיה",label:"אמבטיה/מקלחת"},{value:2,label:"חדרי שירותים"},{value:24,label:"גודל מרפסת"},{value:22,label:"מס' מחסן"}],[{label:"חניות",value:2},{label:"שטח גינה",value:"אין"}]]},{heading:"מסמכים",list:[[{href:"#",label:"חוזה מכר",icon:"file"},{href:"#",icon:"file",label:"תוכנית מכר"},{href:"#",icon:"file",label:"מפרטים"}]]}],o=[{label:"שם",value:"אביחי כהן"},{label:"טלפון להתקשרות",value:"03-9017710 שלוחה 126"},{label:"פקס",value:"03-9015177"},{label:'דוא"ל',value:"avichiy.c@ram-aderet.co.il"}];return{carousel:e,contacts:o,additional:t}}};n("7ba6");xe.render=Le,xe.__scopeId="data-v-7f6e5192";var Ve=xe,We={name:"Detail",components:{CHeader:de,CFooter:ve,CAllItems:Ee,CDetailItem:Ve}};We.render=H;var Ne=We,ze=(n("a4d3"),n("e01a"),Object(o["P"])("data-v-1c804733"));Object(o["w"])("data-v-1c804733");var Ke={class:"options"},$e=Object(o["i"])();Object(o["u"])();var Qe=ze((function(e,t,n,i,a,r){var l=Object(o["B"])("IFrame");return Object(o["t"])(),Object(o["f"])("div",Ke,[Object(o["j"])(l,{src:r.srcFullPath,title:a.currentPage.description},{default:ze((function(){return[$e]})),_:1},8,["src","title"])])}));n("7db0");function He(e,t,n,i,a,r){return Object(o["t"])(),Object(o["f"])("iframe",{src:n.src,name:"iframe1"}," ",8,["src"])}var Ze={name:"IFrame",props:{src:{type:String}}};n("e5ef");Ze.render=He;var Ge=Ze,Je={name:"Options",components:{IFrame:Ge},data:function(){return{appDetails:{mainPath:"http://localhost:1900/",pages:[{id:1,name:"AddPicture.aspx",description:"הוסף תמוניות ומסמכים"},{id:2,name:"AttendanceReporting.aspx",description:"דיווח נוכחות"},{id:3,name:"",description:""},{id:4,name:"",description:""},{id:5,name:"SafetySurveysDaily.aspx",description:"סיורי בטיחות"},{id:6,name:"",description:""}],queryString:"?appUserId=227"},currentPage:{}}},computed:{srcFullPath:function(){return this.appDetails.mainPath+this.currentPage.name+this.appDetails.queryString}},mounted:function(){this.changePage()},methods:{changePage:function(){var e=this;this.currentPage=this.appDetails.pages.find((function(t){return t.id===+e.$route.params.id}))}},watch:{"$route.params.id":function(){this.changePage()}}};n("493b");Je.render=Qe,Je.__scopeId="data-v-1c804733";var Ye=Je,Xe=Object(o["P"])("data-v-3a52924b");Object(o["w"])("data-v-3a52924b");var et={class:"p-d-flex p-jc-evenly p-flex-wrap"},tt={class:"field p-d-flex p-ai-center p-m-2"},nt=Object(o["j"])("label",{for:"date"},"תאריך :",-1),ot={class:"p-d-flex p-flex-column"},it={class:"field p-d-flex p-ai-center p-m-2"},at=Object(o["j"])("label",{for:"project"},"פרויקט :",-1),rt={class:"p-d-flex p-flex-column"},lt={class:"field p-d-flex p-ai-center p-m-2"},ct=Object(o["j"])("label",{for:"entity"},"גורם :",-1),st={class:"p-d-flex p-flex-column"},ut={class:"field p-d-flex p-ai-center p-m-2"},dt=Object(o["j"])("label",{for:"entityId"},"שם גורם :",-1),_t={class:"p-d-flex p-flex-column"},pt={class:"field p-d-flex p-ai-center p-m-2"},mt=Object(o["j"])("label",{for:"transactiontype"},"סימון :",-1),ft={class:"p-d-flex p-flex-column"};Object(o["u"])();var bt=Xe((function(e,t,n,i,a,r){var l=Object(o["B"])("Calendar"),c=Object(o["B"])("Dropdown"),s=Object(o["B"])("Column"),u=Object(o["B"])("RadioButton"),d=Object(o["B"])("Checkbox"),_=Object(o["B"])("DataTable");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["j"])("div",et,[Object(o["j"])("div",tt,[nt,Object(o["j"])("div",ot,[Object(o["j"])(l,{id:"date",modelValue:a.date,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.date=e}),showIcon:"",disabled:""},null,8,["modelValue"])])]),Object(o["j"])("div",it,[at,Object(o["j"])("div",rt,[Object(o["j"])(c,{id:"project",modelValue:a.selectedProject,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.selectedProject=e}),options:a.projects,optionLabel:"ProjectName",optionValue:"ProjectId",onChange:r.loadDetails,showClear:!0},null,8,["modelValue","options","onChange"])])]),Object(o["j"])("div",lt,[ct,Object(o["j"])("div",st,[Object(o["j"])(c,{id:"entity",modelValue:a.selectedEntity,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.selectedEntity=e}),options:a.entitys,optionLabel:"Name",optionValue:"ID",showClear:!0,onChange:r.changeEntity},null,8,["modelValue","options","onChange"])])]),Object(o["j"])("div",ut,[dt,Object(o["j"])("div",_t,[Object(o["j"])(c,{id:"entityId",modelValue:a.selectedContractor,"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.selectedContractor=e}),options:r.contractors,optionLabel:"ContractorName",optionValue:"EntityID",showClear:!0,onChange:r.changeContractor},null,8,["modelValue","options","onChange"])])]),Object(o["j"])("div",pt,[mt,Object(o["j"])("div",ft,[Object(o["j"])(c,{id:"transactiontype",modelValue:a.selectedTransactiontype,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.selectedTransactiontype=e}),options:a.transactiontypes,showClear:!0,optionLabel:"Name",optionValue:"ID",onChange:r.setWorkersTransactionType},null,8,["modelValue","options","onChange"])])])]),Object(o["j"])("div",null,[Object(o["j"])(_,{value:r.workerslist,resizableColumns:!1,rowClass:r.workerSelected,editMode:"cell",class:"p-datatable p-datatable-responsive p-fluid"},{default:Xe((function(){return[Object(o["j"])(s,{field:"worker_name_order",header:"שם עובד"}),Object(o["j"])(s,{field:"WorkerID",header:"מס' זהות"}),Object(o["j"])(s,{field:"transaction_type",header:"סוג העסקה"},{body:Xe((function(e){return[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(a.transactiontypes,(function(t){return Object(o["t"])(),Object(o["f"])("div",{key:t.ID,class:"p-field-radiobutton"},[Object(o["j"])(u,{id:t.ID,name:"transaction",value:t.ID,modelValue:e.data["transaction_type"],"onUpdate:modelValue":function(t){return e.data["transaction_type"]=t},onFocus:function(t){return r.setWorker(e.data)}},null,8,["id","value","modelValue","onUpdate:modelValue","onFocus"]),Object(o["j"])("label",{for:t.ID},Object(o["F"])(t.Name),9,["for"])])})),128))]})),_:1}),Object(o["j"])(s,{field:"checked",header:"סימון",headerStyle:"width: 5em;"},{body:Xe((function(e){return[Object(o["j"])(d,{modelValue:e.data.checked,"onUpdate:modelValue":function(t){return e.data.checked=t},binary:!0,onChange:function(t){return r.setWorker(e.data,2)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:1})]})),_:1},8,["value","rowClass"])])],64)})),jt=(n("4de4"),n("159b"),n("d3b7"),n("25f0"),n("cb8b")),ht=n("5b2c"),Ot=n("6f85"),gt=n("0100"),vt=n("b35c"),Ct={name:"AttendanceReporting",components:{Calendar:jt["a"],Dropdown:gt["a"],DataTable:ht["a"],Column:Ot["a"],Checkbox:E["a"],RadioButton:vt["a"]},data:function(){return{date:new Date,projects:[],selectedProject:null,entitys:[],selectedEntity:null,allContractors:[],selectedContractor:null,transactiontypes:[],selectedTransactiontype:null,allWorkerslist:[]}},mounted:function(){var e=this,t=[Object(I["d"])("UserId",this.userID,I["c"].Int),Object(I["d"])("PermissionsType",1,I["c"].Int)];Object(I["e"])("pr_WebApp_PhotoAdd_ProjectList_Permissions",t).then((function(t){t=JSON.parse(t),e.projects=t.Table,e.entitys=t.Table1,e.transactiontypes=t.Table2})).catch((function(t){console.log(t),e.$toast.add({severity:"error",summary:"שגיאה - פנה לתמיכה",detail:t,life:1e4,closable:!0})}))},computed:Object(r["a"])({contractors:function(){var e=this;return this.allContractors.filter((function(t){return t.EntityType===e.selectedEntity||0===t.EntityType}))},workerslist:function(){var e=this;return this.allWorkerslist.filter((function(t){return t.EntityType===e.selectedEntity&&t.EntityID===e.selectedContractor}))}},Object(l["c"])({userID:function(e){return+e.api.userID}})),methods:{loadDetails:function(){var e=this;if(null!=this.selectedProject){var t=[Object(I["d"])("UserId",this.userID,I["c"].Int),Object(I["d"])("ProjectId",this.selectedProject,I["c"].Int),Object(I["d"])("Date",this.date,I["c"].DateTime)];Object(I["e"])("pr_WebApp_Attendance_Reporting_lists",t).then((function(t){t=JSON.parse(t),console.log("result",t),e.allContractors=t.Table,e.allWorkerslist=t.Table1})).catch((function(t){console.log(t),e.$toast.add({severity:"error",summary:"שגיאה - פנה לתמיכה",detail:t,life:1e4,closable:!0})}))}else this.clearedProject()},getTransactionType:function(e){return-1==e?"בחר":this.transactiontypes.filter((function(t){return t.ID===e}))[0].Name},setWorkersTransactionType:function(){var e=this;this.workerslist.forEach((function(t){!0!==t.checked&&(t.transaction_type=e.selectedTransactiontype)}))},setWorker:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;console.log("setWorker",e);var o=e.checked;if(1==n)if(-1==e.transaction_type){if(o)return this.$toast.add({severity:"error",summary:"נתונים חסרים",detail:"יש לבחור סוג העסקה",closable:!0}),void(e.checked=!e.checked)}else if(o){if(o="update",e.checked==e.transaction_type)return}else o=!0,e.checked=!0;else{if(!0===e.checked&&-1===e.transaction_type)return this.$toast.add({severity:"error",summary:"נתונים חסרים",detail:"יש לבחור סוג העסקה",closable:!0}),void(e.checked=!1);""!==e.Work_permit&&this.$toast.add({severity:"warn",summary:"",detail:e.Work_permit,closable:!0})}var i=[Object(I["d"])("id",e.ID,I["c"].Int),Object(I["d"])("date",this.date.toLocaleDateString(),I["c"].SmallDateTime),Object(I["d"])("InsertDelete",o.toString(),I["c"].NVarChar),Object(I["d"])("transaction_type",e.transaction_type,I["c"].Int),Object(I["d"])("userID",this.userID,I["c"].int),Object(I["d"])("validWorker",!0,I["c"].Bit)];Object(I["e"])("WebApp_Attendance_Reporting",i).then((function(o){o=JSON.parse(o);var i=o.Table[0].Column1;"OK"==i?console.log("OK"):"0"==i?(e.checked=!e.checked,t.$router.push({name:"Home"})):(t.$toast.add({severity:"warn",summary:"",detail:i,closable:!0}),2==n?e.checked=!e.checked:2==e.transaction_type?e.checked=1:1==e.transaction_type&&(e.checked=2))})).catch((function(e){console.log(e),t.$toast.add({severity:"error",summary:"שגיאה - פנה לתמיכה",detail:e,life:1e4,closable:!0})}))},workerSelected:function(e){return e.checked?"workerSelected":null},changeEntity:function(){null!=this.selectedEntity&&this.clearedEntity()},changeContractor:function(){null!=this.selectedContractor&&this.clearedContractor()},clearedProject:function(){this.selectedEntity=null,this.selectedContractor=null,this.selectedTransactiontype=null},clearedEntity:function(){this.selectedContractor=null,this.selectedTransactiontype=null},clearedContractor:function(){this.selectedTransactiontype=null}}};n("d8dd");Ct.render=bt,Ct.__scopeId="data-v-3a52924b";var yt=Ct,wt=Object(o["P"])("data-v-0511a6d4");Object(o["w"])("data-v-0511a6d4");var Pt=Object(o["j"])("h3",{style:{margin:"auto"}},"בחירת תוכנית",-1),Dt={style:{margin:"auto"}},Et={key:2,class:"container"},It={key:0},St={class:"single_form"},kt={key:4,class:"error p-mt-1 p-mr-2"},At={key:1},Mt={key:2},Ft={key:3},Rt={class:"single_form_buttons"},Tt={key:3,class:"quality-control-dekstop"},qt={class:"qc-container"},Bt={class:"qc-preview"},Lt=Object(o["i"])(" מספר בקרה: "),Ut=Object(o["i"])(" תאריך פתיחה: "),xt={class:"qc-info"},Vt={class:"info-first"},Wt=Object(o["i"])(" סטטוס: "),Nt=Object(o["i"])(" ימי פיגור: "),zt=Object(o["i"])(" פרק: "),Kt=Object(o["i"])(" סוג ליקוי: "),$t=Object(o["i"])(" רמת חומרה: "),Qt={class:"info-location"},Ht=Object(o["j"])("h5",null,"מיקום:",-1),Zt=Object(o["i"])(" חלל 1: "),Gt=Object(o["i"])(" חלל 2: "),Jt=Object(o["i"])(" חלל 3: "),Yt={class:"info-second-and-btns"},Xt={class:"info-second"},en=Object(o["i"])(" פותח הבקרה: "),tn=Object(o["i"])(" אחראי לביצוע: "),nn=Object(o["i"])(" יעד לביצוע: "),on={class:"btns"},an={class:"qc-desc"},rn={class:"qc-files"},ln=Object(o["j"])("h5",null,"קבצים מצורפים:",-1),cn={class:"the-files"};Object(o["u"])();var sn=wt((function(e,t,n,i,a,r){var l=Object(o["B"])("SelectPlan"),c=Object(o["B"])("Dialog"),s=Object(o["B"])("QCReporting"),u=Object(o["B"])("galleria-full"),d=Object(o["B"])("ImageEditor"),_=Object(o["B"])("Button"),p=Object(o["B"])("a-point-textbox"),m=Object(o["B"])("a-point-checkbox"),f=Object(o["B"])("a-point-dropdown"),b=Object(o["B"])("Textarea"),j=Object(o["B"])("QualityControlAdd"),h=Object(o["B"])("QualityControlOpen"),O=Object(o["B"])("q-creports");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["M"])(Object(o["j"])("input",{type:"file",onChange:t[1]||(t[1]=function(){return r.uploadImage&&r.uploadImage.apply(r,arguments)}),ref:"evClickFile",accept:"image/*"},null,544),[[o["J"],!1]]),Object(o["j"])(c,{visible:a.displaySelectPlan,"onUpdate:visible":t[3]||(t[3]=function(e){return a.displaySelectPlan=e}),modal:""},{header:wt((function(){return[Pt]})),default:wt((function(){return[Object(o["j"])("div",null,[Object(o["j"])(l,{apartmentId:r.apartmentId,onDisplayPlan:r.displayPlan,onClose:t[2]||(t[2]=function(e){return a.displaySelectPlan=!1})},null,8,["apartmentId","onDisplayPlan"])])]})),_:1},8,["visible"]),Object(o["j"])(c,{visible:a.displayReporting,"onUpdate:visible":t[4]||(t[4]=function(e){return a.displayReporting=e}),modal:""},{header:wt((function(){return[Object(o["j"])("h3",Dt," דיווח טיפול בבקרה מס' "+Object(o["F"])(n.qualityControl.quality_control_id),1)]})),footer:wt((function(){return[]})),default:wt((function(){return[Object(o["j"])("div",null,[Object(o["j"])(s,{qualityControl:r.qcObject,onCloseReporting:r.closeReporting,onAddPoto:r.closeReportingAndAddPoto},null,8,["qualityControl","onCloseReporting","onAddPoto"])])]})),_:1},8,["visible"]),a.displayAttFiles?(Object(o["t"])(),Object(o["f"])(u,{key:0,images:r.images,displayFullScreen:!0,onCloseGalleria:t[5]||(t[5]=function(e){return a.displayAttFiles=!1})},null,8,["images"])):Object(o["g"])("",!0),a.imageEditor.displayImageEditor?(Object(o["t"])(),Object(o["f"])(d,{key:1,onSaveImage:r.saveImage,dataUrl:a.imageEditor.dataUrl,onCancel:t[6]||(t[6]=function(e){return a.displayReporting=!1})},null,8,["onSaveImage","dataUrl"])):Object(o["g"])("",!0),a.isDesktop&&a.qcMode!==a.qcModes_enum.e_new?Object(o["g"])("",!0):(Object(o["t"])(),Object(o["f"])("div",Et,[a.imageEditor.displayImageEditor?Object(o["g"])("",!0):(Object(o["t"])(),Object(o["f"])("div",It,[a.qcMode!==a.qcModes_enum.e_new?(Object(o["t"])(),Object(o["f"])(_,{key:0,onClick:r.backToParent,icon:"pi pi-angle-left"},null,8,["onClick"])):Object(o["g"])("",!0),Object(o["j"])("div",St,[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(r.detailsFields,(function(e,t){return Object(o["t"])(),Object(o["f"])("div",{class:["field p-d-flex p-ai-center p-m-2",e.Name],key:t},[Object(o["j"])("label",{for:e.Name},Object(o["F"])(e.Caption),9,["for"]),Object(o["j"])("div",{class:"p-d-flex p-flex-column",ref:"",id:e.Name},["text"==e.apointType?(Object(o["t"])(),Object(o["f"])(p,{key:0,field:e,"model-value":e.ControlSource,"onUpdate:modelValue":function(t){return e.ControlSource=t}},null,8,["field","model-value","onUpdate:modelValue"])):"checkbox"==e.apointType?(Object(o["t"])(),Object(o["f"])(m,{key:1,field:e,"model-value":e.ControlSource,"onUpdate:modelValue":function(t){return e.ControlSource=t}},null,8,["field","model-value","onUpdate:modelValue"])):"dropdown"==e.apointType?(Object(o["t"])(),Object(o["f"])(f,{key:2,field:e,"model-value":e.ControlSource,"onUpdate:modelValue":function(t){return r.updateField(e,t)}},null,8,["field","model-value","onUpdate:modelValue"])):"textarea"==e.apointType?(Object(o["t"])(),Object(o["f"])(b,{key:3,field:e,"model-value":e.ControlSource,"onUpdate:modelValue":function(t){return r.updateField(e,t)},autoResize:"",disabled:!e.Enabled||e.Locked,rows:1,style:{border:"1px solid #ced4da"}},null,8,["field","model-value","onUpdate:modelValue","disabled"])):Object(o["g"])("",!0),e.check?(Object(o["t"])(),Object(o["f"])("span",kt," * שדה חובה ")):Object(o["g"])("",!0)],8,["id"])],2)})),128))]),a.qcMode===a.qcModes_enum.e_new?(Object(o["t"])(),Object(o["f"])("div",At,[Object(o["j"])(j,{onSaveClose:r.saveClose,apartmentId:r.apartmentId,onPlans:r.selectPlan,onAddNewQC:r.addNewQC,onAddPoto:r.addPoto},null,8,["onSaveClose","apartmentId","onPlans","onAddNewQC","onAddPoto"])])):a.qcMode===a.qcModes_enum.e_open?(Object(o["t"])(),Object(o["f"])("div",Mt,[Object(o["j"])(u,{images:r.images},null,8,["images"]),Object(o["j"])(h,{onPlans:r.selectPlan,onReporting:r.reporting,apartmentId:r.apartmentId},null,8,["onPlans","onReporting","apartmentId"])])):a.qcMode===a.qcModes_enum.e_close?(Object(o["t"])(),Object(o["f"])("div",Ft,[Object(o["j"])(O,{QCreports:n.qcReports},null,8,["QCreports"]),Object(o["j"])("div",Rt,[Object(o["j"])(_,{disabled:0===r.apartmentId,label:"תוכניות",onClick:r.selectPlan,icon:"pi pi-file-pdf"},null,8,["disabled","onClick"]),Object(o["j"])(_,{icon:"pi pi-folder-open",onClick:r.attFiles,class:"qc-buttons"},null,8,["onClick"]),Object(o["j"])(_,{label:"פתח בקרה מחדש",onClick:r.openCloseQC},null,8,["onClick"])])])):Object(o["g"])("",!0)]))])),a.isDesktop&&a.qcMode&&a.qcMode!==a.qcModes_enum.e_new&&!a.imageEditor.displayImageEditor?(Object(o["t"])(),Object(o["f"])("section",Tt,[Object(o["j"])("div",qt,[Object(o["j"])("div",Bt,[Object(o["j"])("h5",null,[Lt,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.quality_control_id),1)]),Object(o["j"])("h5",null,[Ut,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.formattedCreate_date),1)])]),Object(o["j"])("div",xt,[Object(o["j"])("div",Vt,[Object(o["j"])("h5",null,[Wt,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.status_name),1)]),Object(o["j"])("h5",null,[Nt,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.pigur),1)]),Object(o["j"])("h5",null,[zt,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.chapter_name),1)]),Object(o["j"])("h5",null,[Kt,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.chapter_name),1)]),Object(o["j"])("h5",null,[$t,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.impairment_desc),1)]),Object(o["j"])("div",Qt,[Ht,Object(o["j"])("h5",null,[Zt,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.project_zone1_name),1)]),Object(o["j"])("h5",null,[Gt,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.project_zone2_name),1)]),Object(o["j"])("h5",null,[Jt,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.project_zone3_name),1)])])]),Object(o["j"])("div",Yt,[Object(o["j"])("div",Xt,[Object(o["j"])("h5",null,[en,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.creater_name),1)]),Object(o["j"])("h5",null,[tn,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.responsible_name),1)]),Object(o["j"])("h5",null,[nn,Object(o["j"])("span",null,Object(o["F"])(n.qualityControl.formattedPlaned_date),1)])]),Object(o["j"])("div",on,[a.qcMode===a.qcModes_enum.e_open?(Object(o["t"])(),Object(o["f"])(h,{key:0,onPlans:r.selectPlan,onReporting:r.reporting,apartmentId:r.apartmentId},null,8,["onPlans","onReporting","apartmentId"])):Object(o["g"])("",!0)])])]),Object(o["j"])("div",an,[Object(o["j"])(b,{value:n.qualityControl.impairment_desc,autoResize:!1,disabled:"",rows:"1",cols:"70"},null,8,["value"])]),Object(o["j"])("div",rn,[ln,Object(o["j"])("div",cn,[Object(o["j"])(u,{images:r.images},null,8,["images"])])])])])):Object(o["g"])("",!0)],64)})),un=n("19a7");n("1f3d");un["a"].render=sn,un["a"].__scopeId="data-v-0511a6d4";var dn=un["a"],_n=Object(o["P"])("data-v-8eaa04a4");Object(o["w"])("data-v-8eaa04a4");var pn={class:"chipFilters"},mn={key:2},fn={class:"p-d-flex p-ai-center p-jc-between",style:{width:"97%"}},bn={class:"controls"},jn={key:0,class:"qc-table-headers"},hn={class:"qc-list"},On=Object(o["j"])("div",{class:"dropdownFilter"},null,-1),gn={key:0,class:"qc-not-desktop"},vn={class:"content"},Cn={class:"p-text-bold"},yn={class:"buttonsDiv"},wn={class:"qc-id"},Pn={class:"qc-create-date"},Dn={class:"qc-status"},En={class:"qc-chapter"},In={class:"qc-impairment"},Sn={class:"qc-level"},kn={style:{margin:"auto"}},An={key:0};Object(o["u"])();var Mn=_n((function(e,t,n,i,a,r){var l=Object(o["B"])("Chip"),c=Object(o["B"])("ImageEditor"),s=Object(o["B"])("QualityControlsFilters"),u=Object(o["B"])("galleria-full"),d=Object(o["B"])("Button"),_=Object(o["B"])("QCReporting"),p=Object(o["B"])("Dialog"),m=Object(o["B"])("QualityControl");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["M"])(Object(o["j"])("div",pn,[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(r.filterToShow,(function(e){return Object(o["t"])(),Object(o["f"])(l,{key:e.num,label:e.caption+": "+e.value+" ",removable:"",onRemove:function(t){return r.clearFilters(e.num)}},null,8,["label","onRemove"])})),128))],512),[[o["J"],!a.imageEditor.displayImageEditor]]),Object(o["j"])("div",null,[Object(o["M"])(Object(o["j"])("input",{type:"file",onChange:t[1]||(t[1]=function(){return r.uploadImage&&r.uploadImage.apply(r,arguments)}),ref:"evClickFile",accept:"image/*"},null,544),[[o["J"],!1]]),a.imageEditor.displayImageEditor?(Object(o["t"])(),Object(o["f"])(c,{key:0,onSaveImage:r.saveImage,dataUrl:a.imageEditor.dataUrl,onCancel:t[2]||(t[2]=function(e){return a.imageEditor.displayImageEditor=!1})},null,8,["onSaveImage","dataUrl"])):Object(o["g"])("",!0),Object(o["M"])(Object(o["j"])("div",null,[Object(o["j"])(s,{removeFilter:a.removeFilter,onShowData:r.setFilters,onUpdateFilters:r.updateFilters,onClearFilters:r.clearFilters,onFilterRemoved:t[3]||(t[3]=function(e){return a.removeFilter=null})},null,8,["removeFilter","onShowData","onUpdateFilters","onClearFilters"])],512),[[o["J"],a.displayFilters]]),a.displayAttFiles?(Object(o["t"])(),Object(o["f"])(u,{key:1,images:r.images,displayFullScreen:!0,onCloseGalleria:t[4]||(t[4]=function(e){return a.displayAttFiles=!1})},null,8,["images"])):Object(o["g"])("",!0),a.displayQualityControl&&!a.isDesktop||a.imageEditor.displayImageEditor?Object(o["g"])("",!0):(Object(o["t"])(),Object(o["f"])("div",mn,[Object(o["M"])(Object(o["j"])("div",null,[Object(o["j"])("div",fn,[Object(o["j"])(d,{label:"בקרה חדשה",onClick:r.openNewQC,icon:"pi pi-plus-circle",style:{height:"30px"}},null,8,["onClick"]),Object(o["j"])(d,{label:"סינונים",onClick:r.showFilters,icon:"pi pi-filter",style:{height:"30px"}},null,8,["onClick"])]),Object(o["j"])("div",bn,[a.isDesktop?(Object(o["t"])(),Object(o["f"])("div",jn,[Object(o["j"])("h5",{onClick:t[5]||(t[5]=function(e){return r.sortBy("id")}),class:"table-header"},"מס' בקרה"),Object(o["j"])("h5",{onClick:t[6]||(t[6]=function(e){return r.sortBy("date")}),class:"table-header"},"תאריך פתיחה"),Object(o["j"])("h5",{onClick:t[7]||(t[7]=function(e){return r.sortBy("status_name")}),class:"table-header"},"סטטוס"),Object(o["j"])("h5",{onClick:t[8]||(t[8]=function(e){return r.sortBy("chapter_name")}),class:"table-header"},"פרק"),Object(o["j"])("h5",{onClick:t[9]||(t[9]=function(e){return r.sortBy("impairment_desc")}),class:"table-header"}," סוג ליקוי "),Object(o["j"])("h5",{onClick:t[10]||(t[10]=function(e){return r.sortBy("level_desc")}),class:"table-header"}," רמת חומרה ")])):Object(o["g"])("",!0),Object(o["j"])("div",hn,[On,(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(a.qualityControls,(function(e){return Object(o["t"])(),Object(o["f"])("div",{key:e.quality_control_id,class:"qc"},[a.isDesktop?Object(o["g"])("",!0):(Object(o["t"])(),Object(o["f"])("div",gn,[Object(o["j"])("div",{class:"title",onClick:function(t){return r.openQC(e)}}," ב "+Object(o["F"])(e.quality_control_id)+" - "+Object(o["F"])(e.formattedCreate_date),9,["onClick"]),Object(o["j"])("div",vn,[Object(o["j"])("div",{onClick:function(t){return r.openQC(e)}},[Object(o["j"])("div",null,Object(o["F"])(e.project_zone1_name)+" - "+Object(o["F"])(e.project_zone2_name)+" - "+Object(o["F"])(e.project_zone3_name),1),Object(o["j"])("div",Cn,Object(o["F"])(e.chapter_name),1),Object(o["j"])("div",null,Object(o["F"])(e.responsible_name),1)],8,["onClick"]),Object(o["j"])("div",yn,[Object(o["j"])(d,{icon:"pi pi-folder-open",class:"folder-btn",onClick:function(t){return r.addAttFiles(e)}},null,8,["onClick"]),Object(o["j"])(d,{label:"דווח",class:"p-button-sm report-btn",onClick:function(t){return r.reporting(e)},disabled:e.status_id===r.qcStatuses.e_close},null,8,["onClick","disabled"])])]),Object(o["j"])("div",{class:"description",onClick:function(t){return r.openQC(e)}},Object(o["F"])(e.quality_control_desc),9,["onClick"])])),a.isDesktop?(Object(o["t"])(),Object(o["f"])("section",{key:1,class:"qc-desktop",onClick:function(t){return r.openQC(e)}},[Object(o["j"])("div",wn,Object(o["F"])(e.quality_control_id),1),Object(o["j"])("div",Pn,Object(o["F"])(e.formattedCreate_date),1),Object(o["j"])("div",Dn,Object(o["F"])(e.status_name),1),Object(o["j"])("div",En,Object(o["F"])(e.chapter_name),1),Object(o["j"])("div",In,Object(o["F"])(e.impairment_desc),1),Object(o["j"])("div",Sn,Object(o["F"])(e.level_desc),1)],8,["onClick"])):Object(o["g"])("",!0)])})),128))]),Object(o["j"])(p,{visible:a.displayReporting,"onUpdate:visible":t[11]||(t[11]=function(e){return a.displayReporting=e}),modal:""},{header:_n((function(){return[Object(o["j"])("h3",kn," דיווח טיפול בבקרה מס' "+Object(o["F"])(a.qualityControl.quality_control_id),1)]})),footer:_n((function(){return[]})),default:_n((function(){return[Object(o["j"])("div",null,[Object(o["j"])(_,{qualityControl:a.qualityControl,onCloseReporting:r.closeReporting,onAddPoto:r.addPoto},null,8,["qualityControl","onCloseReporting","onAddPoto"])])]})),_:1},8,["visible"])])],512),[[o["J"],!a.displayFilters]])]))]),!a.displayQualityControl||a.displayFilters||a.imageEditor.displayImageEditor?Object(o["g"])("",!0):(Object(o["t"])(),Object(o["f"])("div",An,[Object(o["j"])(m,{onClose:r.closeQC,qualityControl:a.qualityControl,qcReports:r.getReports(a.qualityControl.quality_control_id),onCloseReportingAndAddPoto:r.addPoto,onUpdateStatus:r.updateStatus},null,8,["onClose","qualityControl","qcReports","onCloseReportingAndAddPoto","onUpdateStatus"])]))],64)})),Fn=(n("c740"),n("a434"),n("d81d"),{class:"p-d-flex p-ai-center p-jc-end",style:{width:"97%"}}),Rn={class:"p-d-flex p-ai-center p-jc-center p-mb-4 p-mt-2"},Tn={class:"single_form"},qn={key:5,class:"error p-mt-1 p-mr-2"},Bn={class:" p-d-flex p-flex-column p-ai-center"};function Ln(e,t,n,i,a,r){var l=Object(o["B"])("Button"),c=Object(o["B"])("SelectButton"),s=Object(o["B"])("a-point-textbox"),u=Object(o["B"])("a-point-checkbox"),d=Object(o["B"])("a-point-dropdown"),_=Object(o["B"])("MultiSelect"),p=Object(o["B"])("AutoComplete");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["j"])("div",Fn,[Object(o["j"])(l,{class:"p-m-2 btn-filter",label:"הצג בקרות",onClick:r.showQc},null,8,["onClick"]),Object(o["j"])(l,{class:"p-m-2 btn-filter",icon:"pi pi-filter-slash",label:"נקה",onClick:t[1]||(t[1]=function(e){return r.clearFilters()})})]),Object(o["j"])("div",Rn,[Object(o["j"])(c,{modelValue:a.showControls.ControlSource,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.showControls.ControlSource=e}),options:a.showControls.RowSource,optionLabel:a.showControls.optionLabel,optionValue:a.showControls.optionValue,class:"ltrDir",onClick:t[3]||(t[3]=function(e){return r.changeDates()})},null,8,["modelValue","options","optionLabel","optionValue"])]),Object(o["j"])("div",Tn,[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(a.fields,(function(e,t){return Object(o["t"])(),Object(o["f"])("div",{class:"field p-d-flex p-ai-center",key:t},[0!=e.show?(Object(o["t"])(),Object(o["f"])("label",{key:0,for:e.Name},Object(o["F"])(e.Caption),9,["for"])):Object(o["g"])("",!0),0!=e.show?(Object(o["t"])(),Object(o["f"])("div",{key:1,class:"p-d-flex p-flex-column p-mb-2 p-mt-2",ref:"",id:e.Name},["text"==e.apointType?(Object(o["t"])(),Object(o["f"])(s,{key:0,field:e,modelValue:e.ControlSource,"onUpdate:modelValue":function(t){return r.updateField(e,t)}},null,8,["field","modelValue","onUpdate:modelValue"])):"checkbox"==e.apointType?(Object(o["t"])(),Object(o["f"])(u,{key:1,field:e,modelValue:e.ControlSource,"onUpdate:modelValue":function(t){return r.updateField(e,t)}},null,8,["field","modelValue","onUpdate:modelValue"])):"dropdown"==e.apointType?(Object(o["t"])(),Object(o["f"])(d,{key:2,field:e,modelValue:e.ControlSource,"onUpdate:modelValue":function(t){return r.updateField(e,t)}},null,8,["field","modelValue","onUpdate:modelValue"])):"multiSelect"==e.apointType?(Object(o["t"])(),Object(o["f"])(_,{key:3,modelValue:e.ControlSource,"onUpdate:modelValue":function(t){return e.ControlSource=t},options:e.RowSource,optionLabel:e.optionLabel,optionValue:e.optionValue,display:"chip",filter:null!==e.RowSource&&void 0!==e.RowSource&&e.RowSource.length>10,onChange:function(t){return e.FuncOnUpdate(e)}},null,8,["modelValue","onUpdate:modelValue","options","optionLabel","optionValue","filter","onChange"])):"autoComplete"===e.apointType?(Object(o["t"])(),Object(o["f"])(p,{key:4,modelValue:e.ControlSource,"onUpdate:modelValue":function(t){return e.ControlSource=t},suggestions:e.suggestions,onComplete:function(t){return e.FuncOnComplete(e,t)},onBlur:function(t){return e.FuncOnUpdate(e,t)},onItemSelect:function(t){return e.FuncOnUpdate(e,t)}},null,8,["modelValue","onUpdate:modelValue","suggestions","onComplete","onBlur","onItemSelect"])):Object(o["g"])("",!0),e.check?(Object(o["t"])(),Object(o["f"])("span",qn," * שדה חובה ")):Object(o["g"])("",!0)],8,["id"])):Object(o["g"])("",!0)])})),128))]),Object(o["j"])("div",Bn,[Object(o["j"])(l,{class:"p-mt-4 p-button-link",icon:a.showAllBtnIcon,label:a.showAllBtnLbl,onClick:r.showAllFilters},null,8,["icon","label","onClick"])])],64)}var Un=n("f713");n("ec5d");Un["a"].render=Ln;var xn=Un["a"],Vn=n("5bd2"),Wn=n("b036"),Nn=n("192d"),zn=n("a1e6"),Kn=n("c4a8"),$n={name:"QualityControls",components:{Button:D["a"],QualityControlsFilters:xn,Dialog:Vn["a"],QCReporting:Wn["a"],QualityControl:dn,ImageEditor:Nn["a"],Chip:zn["a"],GalleriaFull:Kn["a"]},data:function(){return{isIdSortUp:!1,isDateSortUp:!1,isStatusSortUp:!1,isChapterSortUp:!1,isImpairmentSortUp:!1,isLevelSortUp:!1,qualityControls:[],displayFilters:!1,displayReporting:!1,qualityControl:null,displayQualityControl:!1,isDesktop:!0,imageEditor:{displayImageEditor:!1,dataUrl:"",fileName:""},displayAttFiles:!1,attached_files:[],chipFilters:[],removeFilter:null,qualityControlsReports:[],sortByList:[{field:"id",desc:"תאריך פתיחה"},{field:"zones",desc:"חללים"},{field:"chapter_name",desc:"פרק"},{field:"responsible_name",desc:"אחראי לביצוע"}]}},mounted:function(){console.log("qcStatuses",S["b"])},created:function(){this.isDesktop=window.innerWidth>896},methods:{sortBy:function(e){var t=this,n=JSON.parse(JSON.stringify(this.qualityControls));switch(e){case"date":n=n.sort((function(e,n){return t.isDateSortUp?new Date(e.create_date)-new Date(n.create_date):new Date(n.create_date)-new Date(e.create_date)})),this.isDateSortUp=!this.isDateSortUp;break;case"id":n=n.sort((function(e,n){return t.isIdSortUp?n.quality_control_id-e.quality_control_id:e.quality_control_id-n.quality_control_id})),this.isIdSortUp=!this.isIdSortUp;break;case"status_name":n=n.sort((function(n,o){return t.isStatusSortUp?n[e].localeCompare(o[e]):o[e].localeCompare(n[e])})),this.isStatusSortUp=!this.isStatusSortUp;break;case"chapter_name":n=n.sort((function(n,o){return t.isChapterSortUp?n[e].localeCompare(o[e]):o[e].localeCompare(n[e])})),this.isChapterSortUp=!this.isChapterSortUp;break;case"impairment_desc":n=n.sort((function(n,o){return t.isImpairmentSortUp?o[e].localeCompare(n[e]):n[e].localeCompare(o[e])})),this.isImpairmentSortUp=!this.isImpairmentSortUp;break;case"level_desc":n=n.sort((function(n,o){return t.isLevelSortUp?o[e].localeCompare(n[e]):n[e].localeCompare(o[e])})),this.isLevelSortUp=!this.isLevelSortUp;break}this.qualityControls=n},showFilters:function(){this.displayFilters=!0,this.$store.commit("main/setAppHeader","סינון בקרות")},filterQualityControl:function(){var e=this,t=[Object(I["d"])("user_exec",this.userID,I["c"].Int)];this.chipFilters.forEach((function(e){t.push(Object(I["d"])(e.Name,"multiSelect"===e.apointType?e.ControlSource.toString():e.ControlSource,e.type))})),Object(I["e"])("pr_qc_select",t).then((function(t){t=JSON.parse(t),0===t.procReturnValue?(e.qualityControls=t.Table,e.qualityControlsReports=t.Table1,e.displayFilters=!1):e.$toast.add({severity:"error",summary:"שגיאה בהצגת בקרות - פנה לתמיכה",detail:"",life:1e4,closable:!0})})).catch((function(t){console.log("pr_qc_select-error",t),e.$toast.add({severity:"error",summary:"שגיאה - פנה לתמיכה",detail:t,life:1e4,closable:!0})}))},setFilters:function(){this.$store.commit("main/setAppHeader","ריכוז בקרות"),this.filterQualityControl()},clearFilters:function(e){if(void 0===e)this.chipFilters=[];else{var t=this.chipFilters.findIndex((function(t){return t.num===e}));t>=0&&this.chipFilters.splice(t,1),this.removeFilter=e,this.filterQualityControl()}},updateFilters:function(e){if(""===Object(I["a"])(e.ControlSource,"")||"multiSelect"===e.apointType&&0===e.ControlSource.length){var t=this.chipFilters.findIndex((function(t){return t.num===e.num}));t>=0&&this.chipFilters.splice(t,1)}else void 0!==this.chipFilters.find((function(t){return t.num===e.num}))?this.chipFilters.find((function(t){return t.num===e.num})).ControlSource=e.ControlSource:this.chipFilters.push(e)},reporting:function(e){this.qualityControl=e,this.displayReporting=!0},closeReporting:function(e,t){console.log("closeReporting",e);var n=this.qualityControls.find((function(t){return t.quality_control_id===e.quality_control_id}));n.status_id=e.status_id,n.status_name=this.getAllStatuses().find((function(t){return t.status_id===e.status_id})).status_name,n.responsible_id=e.responsible_id,n.responsible_name=this.getResponsibles().find((function(t){return t.user_id==e.responsible_id})).user_full_name,t||(this.qualityControl=null),this.displayReporting=!1},openQC:function(e){this.qualityControl=e,this.displayQualityControl=!0},clickFile:function(){this.$refs.evClickFile.click()},addPoto:function(e){void 0!==e?this.closeReporting(e,!0):this.displayReporting=!1,this.clickFile()},uploadImage:function(e){var t=this,n=new FileReader;n.onload=function(e){console.log(e.target.result),t.imageEditor.dataUrl=e.target.result,t.imageEditor.displayImageEditor=!0},this.imageEditor.fileName=e.target.files[0].name,n.readAsDataURL(e.target.files[0])},saveImage:function(e){var t,n,o,i,a,r=this;t=S["a"].e_qualityControl,n=this.qualityControl.quality_control_id,o=this.userID,i=this.imageEditor.fileName,a=e,Object(I["g"])(t,n,o,i,a).then((function(e){!0===e?r.$toast.add({severity:"success",summary:"הקובץ צורף בהצלחה",detail:"",life:1e4,closable:!0}):r.$toast.add({severity:"error",summary:"שגיאה בצירוף קובץ",detail:"",life:1e4,closable:!0}),console.log("uploadB64-result",e)})).catch((function(e){r.$toast.add({severity:"error",summary:"שגיאה בצירוף קבצים",detail:e,life:1e4,closable:!0}),console.log("uploadB64-error",e)})).then((function(){r.imageEditor.displayImageEditor=!1,r.imageEditor.dataUrl="",r.imageEditor.fileName=""}))},addAttFiles:function(e){var t=this;this.$store.commit("main/setSpinner",{id:S["c"].e_QualityControls_loadAttFiles,flag:!0});var n=[Object(I["d"])("user_exec",this.userID,I["c"].Int),Object(I["d"])("quality_control_id",e.quality_control_id,I["c"].Int)];Object(I["e"])("pr_qc_get_attached_files",n).then((function(e){e=JSON.parse(e),e.Table.length>0?(t.attached_files=e.Table,t.displayAttFiles=!0):t.$toast.add({severity:"warn",summary:"קבצים מצורפים",detail:"אין נתונים להצגה",life:1e4,closable:!0})})).catch((function(e){t.$toast.add({severity:"error",summary:"שגיאה - פנה לתמיכה",detail:e,life:1e4,closable:!0}),console.log("pr_qc_get_attached_files-error",e)})).then((function(){t.$store.commit("main/setSpinner",{id:S["c"].e_QualityControls_loadAttFiles,flag:!1})}))},closeQC:function(){this.displayQualityControl=!1,this.$store.commit("main/setAppHeader","ריכוז בקרות")},getReports:function(e){return this.qualityControlsReports.filter((function(t){return t.quality_control_id===e}))},updateStatus:function(e,t){this.qualityControls.find((function(t){return t.quality_control_id===e})).status_id=t},openNewQC:function(){this.$router.push({name:"QualityControl"})}},computed:Object(r["a"])(Object(r["a"])({filterToShow:function(){return this.chipFilters.map((function(e){return{num:e.num,Name:e.Name,caption:e.Caption,value:"multiSelect"===e.apointType?e.RowSource.filter((function(t){return e.ControlSource.indexOf(t[e.optionValue])>=0})).map((function(t){return t[e.optionLabel]})).toString():"text"===e.apointType&&"Long Date"===e.Format&&Date.parse(e.ControlSource)===Date.parse(e.ControlSource)?Intl.DateTimeFormat("en-GB").format(e.ControlSource):e.ControlSource}}))},qcStatuses:function(){return S["b"]},images:function(){return this.attached_files.map((function(e){return{ID:e.ID,itemImageSrc:e.fileName,thumbnailImageSrc:e.fileName,alt:e.SrcFile,title:e.SrcFile}}))}},Object(l["c"])({userID:function(e){return+e.api.userID}})),Object(l["b"])({getAllStatuses:"qc/getStatuses",getResponsibles:"qc/getResponsibles"})),watch:{qualityControls:function(){console.log("QC",this.qualityControls[0])}},unmounted:function(){this.$store.commit("main/setSpinner",{id:S["c"].e_QualityControls_loadAttFiles,flag:!1})}};n("b83b");$n.render=Mn,$n.__scopeId="data-v-8eaa04a4";var Qn=$n,Hn=[{path:"/detail/:id",name:"Detail",component:Ne},{path:"/",name:"Home",component:Qn},{path:"/options/:id",name:"Options",component:Ye},{path:"/AttendanceReporting",name:"AttendanceReporting",component:yt},{path:"/QualityControl",name:"QualityControl",component:dn},{path:"/QualityControls/:filter",name:"QualityControls",component:Qn}],Zn=Object($["a"])({routes:Hn,history:Object($["b"])("/qcApp/"),scrollBehavior:function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}}),Gn=Zn,Jn=[{label:"בקרות איכות",items:[{label:"פתיחת בקרה חדשה",to:"/QualityControl"},{label:"בקרות לטיפול שלי",command:function(){Gn.push({name:"QualityControls",params:{filter:"myResponsibility"}})}},{label:"צפייה בבקרות",command:function(){Gn.push({name:"QualityControls",params:{filter:"all"}})}},{label:"בקרות שפתחתי",command:function(){Gn.push({name:"QualityControls",params:{filter:"ICreated"}})}}]},{label:"יציאה",icon:"pi pi-fw pi-power-off",command:function(){K["a"].removeCookie("main-user-object",{path:"/",domain:""}),K["a"].removeCookie("main-user-remember",{path:"/",domain:""}),z["a"].commit("api/resetToken")}}],Yn=n("a344"),Xn=n("427b"),eo={name:"c-mobile-menu",components:{PanelMenu:Yn["a"],CSidebar:Xn["a"],CIcon:ce},data:function(){return{items:Jn}},computed:{showMenu:function(){return!!se.isDesktop()||this.$store.getters["main/getShowMenu"]},showCancle:function(){return!se.isDesktop()},showLogo:function(){return!se.isDesktop()}},watch:{showMenu:function(e,t){if(t)document.body.classList.remove("p-overflow-hidden");else{var n=document.querySelector(".p-sidebar-mask-leave");document.body.classList.add("p-overflow-hidden"),n&&n.classList.remove("p-sidebar-mask-leave")}}}};n("9854");eo.render=N,eo.__scopeId="data-v-2212095a";var to=eo,no={name:"Main",components:{CMobileMenu:to,CHeader:de},mounted:function(){this.$store.dispatch("qc/loadDdlData")},computed:{}};n("79eb");no.render=R,no.__scopeId="data-v-017df482";var oo=no,io=n("a469"),ao={components:{Login:A,Main:oo,ProgressSpinner:io["a"]},data:function(){return{logoImgSrc:"/assets/logo-apoint.png",compName:"ram aderet"}},mounted:function(){var e=this;this.$cookie.config({expire:"30d",path:"/",domain:"",secure:"localhost"!==window.location.host.substring(0,9),sameSite:"Lax"}),setTimeout((function(){e.$store.commit("api/setCompGuid","79D4854D-F78C-4940-87BC-834CCB96ED8C")}),1e3)},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(l["b"])("api",["isLoggedIn"])),Object(l["c"])({compID:function(e){return e.api.compID},compGUID:function(e){return e.api.compGUID},displaySpinner:function(e){return e.main.displaySpinner}})),{},{isDesktop:function(){return se.isDesktop()}})};n("4340");ao.render=a;var ro=ao,lo=(n("255c"),n("b751"),{startsWith:"מתחיל ב",contains:"מכיל",notContains:"לא מכיל",endsWith:"מסתיים ב",equals:"שווה",notEquals:"שונה",noFilter:"אין מסנן",lt:"קטן מ",lte:"קטן או שווה ל",gt:"גדול מ",gte:"גדול שווה ל",dateIs:"תאריך שווה ל",dateIsNot:"תאריך שונה מ",dateBefore:"תאריך קטן מ",dateAfter:"תאריך גדול מ",clear:"נקה",apply:"החל",matchAll:"אתר הכל",matchAny:"אתר אחד מ",addRule:"הוסף כלל",removeRule:"הסר כלל",accept:"כן",reject:"לא",choose:"בחר",upload:"העלה",cancel:"לְבַטֵל",dayNames:["יוֹם רִאשׁוֹן","יוֹם שֵׁנִי","יוֹם שְׁלִישִׁי","יום רביעי","יוֹם חֲמִישִׁי","יוֹם שִׁישִׁי","יום שבת"],dayNamesShort:["רִאשׁוֹן","שֵׁנִי","שְׁלִישִׁי","רביעי","חֲמִישִׁי","שִׁישִׁי","שבת"],dayNamesMin:["א","ב","ג","ד","ה","ו","ש"],monthNames:["יָנוּאָר","פברואר","מרץ","אַפּרִיל","מאי","יוני","יולי","אוגוסט","סֶפּטֶמבֶּר","אוֹקְטוֹבֶּר","נוֹבֶמבֶּר","דֵצֶמבֶּר"],monthNamesShort:["יָנוּאָר","פברואר","מרץ","אַפּרִיל","מאי","יוני","יולי","אוגוסט","סֶפּטֶמבֶּר","אוֹקְטוֹבֶּר","נוֹבֶמבֶּר","דֵצֶמבֶּר"],today:"היום",weekHeader:"שָׁבוּעַ",firstDayOfWeek:0,dateFormat:"dd/mm/yy",weak:"חלש",medium:"בינוני",strong:"חָזָק :)",passwordPrompt:"הזן סיסמא",emptyFilterMessage:"לא נמצאו תוצאות",emptyMessage:"אין אפשרויות זמינות"}),co=n("9319"),so=n("485c"),uo=n("b3b6"),_o=n("216d"),po=n("6b8c"),mo=n("b24b"),fo=(n("e1ae"),n("4121"),n("bddf"),n("9483"));Object(fo["a"])("".concat("/qcApp/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var bo=Object(o["e"])(ro).use(Gn).use(z["a"]).use(K["a"]);Gn.beforeEach((function(e,t,n){console.log("router.beforeEach",e,t),z["a"].commit("main/setAppHeader",""),n()})),Gn.afterEach((function(){z["a"].getters["main/getShowMenu"]&&setTimeout((function(){z["a"].dispatch("main/toggleMenuShow",!1)}),150)})),bo.use(so["a"]).use(co["a"],{locale:lo,ripple:!0}),bo.use(mo["a"]),bo.config.globalProperties.$appState=Object(o["x"])({inputStyle:"outlined"}),bo.directive("tooltip",po["a"]),bo.directive("ripple",_o["a"]),bo.component("Toast",uo["a"]),bo.mount("#app")},"56f7":function(e,t,n){e.exports=n.p+"assets/img/item-4.701262ed.png"},"58e6":function(e,t,n){"use strict";n("9a6d")},"5d57":function(e,t,n){e.exports=n.p+"assets/img/logo-small.afbfaff4.png"},6:function(e,t){},"6ded":function(e,t,n){var o={"./item-0.png":"2f00","./item-1.png":"7d0b","./item-2.png":"135e","./item-3.png":"dc5e","./item-4.png":"56f7","./item-5.png":"7b54","./item-6.png":"9a0f","./item-detail.png":"37ef","./item-menu-0.png":"257b","./item-menu-1.png":"d796","./item-menu-2.png":"7726","./item-menu-3.png":"5560","./item-menu-4.png":"edea","./item-menu-5.png":"a029","./item-menu-6.png":"f766","./item-sm-0.png":"a913","./item-sm-1.png":"3098","./item-sm-2.png":"1080","./item-sm-3.png":"ac8c","./item-sm-4.png":"34fd","./item-sm-5.png":"f255","./item-sm-6.png":"86dd"};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id="6ded"},"6dfd":function(e,t,n){},7:function(e,t){},"742d":function(e,t,n){},7726:function(e,t,n){e.exports=n.p+"assets/img/item-menu-2.0429dfbb.png"},"79eb":function(e,t,n){"use strict";n("f36f")},"7b54":function(e,t,n){e.exports=n.p+"assets/img/item-5.463cb5dd.png"},"7ba6":function(e,t,n){"use strict";n("c8ad")},"7d0b":function(e,t,n){e.exports=n.p+"assets/img/item-1.551cf0cf.png"},"7f9b":function(e,t,n){},8:function(e,t){},8072:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return _})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return b}));var o=n("1da1"),i=(n("96cf"),n("d3b7"),n("d81d"),n("4360")),a="https://apidev.apoint.co.il",r=1e4,l=1e4,c={"Content-Type":"application/json"},s={BigInt:0,Binary:1,Bit:2,Char:3,DateTime:4,Decimal:5,Float:6,Image:7,Int:8,Money:9,NChar:10,NText:11,NVarChar:12,Real:13,UniqueIdentifier:14,SmallDateTime:15,SmallInt:16,SmallMoney:17,Text:18,Timestamp:19,TinyInt:20,VarBinary:21,VarChar:22,Variant:23,Xml:25,Udt:29,Structured:30,Date:31,Time:32,DateTime2:33,DateTimeOffset:34};function u(e,t){return"undefined"===typeof t&&(t="string"===typeof e?"":0),null===e||void 0===e?t:e}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;return{paramName:e,paramValue:void 0===t?null:t,paramType:n}}function _(e,t,n){return p.apply(this,arguments)}function p(){return p=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,o){var l,s,u,_,p,m,f,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=[d("CompID",t,16),d("UserName",n),d("UserPswd",o)],s=new AbortController,u={method:"POST",headers:c,signal:s.signal,body:JSON.stringify(l),redirect:"follow"},_=setTimeout((function(){throw s.abort,{error:"connection timeout"}}),r),i["a"].commit("api/resetToken"),i["a"].commit("api/setSessionData",{userName:n,userPswd:o,compGUID:t}),e.prev=6,e.next=9,fetch(a+"/dbActions/Login/Auth",u);case 9:return p=e.sent,e.next=12,p.text();case 12:if(m=e.sent,f=JSON.parse(m),clearTimeout(_),0!==f.APIResponseCode){e.next=21;break}return b=JSON.parse(f.APIResponseText),i["a"].commit("api/setSessionData",{sessionToken:b.sessionToken,userID:parseInt(b.userId)}),e.abrupt("return",b.userID);case 21:return e.abrupt("return",0);case 22:e.next=28;break;case 24:throw e.prev=24,e.t0=e["catch"](6),console.log("apiGetSessionToken error: ",e.t0),e.t0;case 28:case"end":return e.stop()}}),e,null,[[6,24]])}))),p.apply(this,arguments)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=[d("sessionToken",i["a"].state.api.sessionToken,16),d("procName",e,12)];void 0!=t&&(t=t.map((function(e){return"@"===e.paramName.substring(1,1)?e:{paramName:"@"+e.paramName,paramValue:e.paramValue,paramType:e.paramType}})),s.push({paramName:"procParams",paramValue:JSON.stringify(t),paramType:12})),void 0!=o&&s.push(d("dbName",o,22)),void 0!=r&&s.push(d("schemaName",r,22));var u=new AbortController,_={method:"POST",headers:c,signal:u.signal,body:JSON.stringify(s),redirect:"follow"},p=setTimeout((function(){throw u.abort,{error:"connection timeout"}}),n);return fetch(a+"/dbActions/callProc",_).then((function(e){return e.text()})).then((function(e){clearTimeout(p);var t=JSON.parse(e);if(0==t.APIResponseCode)return"{}"===t.APIResponseText?t.APIResponseCode:t.APIResponseText;throw{errorCode:t.APIResponseCode,errorDescription:t.APIResponseDescription}})).catch((function(e){throw-1==e.errorCode&&i["a"].commit("api/resetToken"),e}))}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";""==t&&(t=i["a"].state.api.compGUID);var o=n("2894")(t);return o.encrypt(e)}function b(e,t,n,o,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l,_=[d("sessionToken",i["a"].state.api.sessionToken,16),d("parentType",e,8),d("parentID",t,8),d("orgID",s,8),d("createdBy",n,8),d("srcFileName",o,12),d("base64String",r,12)],p=new AbortController,m={method:"POST",headers:c,signal:p.signal,body:JSON.stringify(_),redirect:"follow"},f=setTimeout((function(){throw p.abort,{error:"connection timeout"}}),u);return fetch(a+"/files/upload/B64",m).then((function(e){return e.text()})).then((function(e){clearTimeout(f);var t=JSON.parse(e);if(0==t.APIResponseCode)return console.log("uploadB64","ResponseCode",t.APIResponseCode,"ResponseText",t.APIResponseText),!0;throw{errorCode:t.APIResponseCode,errorDescription:t.APIResponseDescription,responseText:t.APIResponseText}})).catch((function(e){throw-1==e.errorCode&&i["a"].commit("api/resetToken"),e}))}},"85ec":function(e,t,n){},"86dd":function(e,t,n){e.exports=n.p+"assets/img/item-sm-6.7b2a6daa.png"},"887d":function(e,t,n){"use strict";var o=n("7a23"),i=Object(o["P"])("data-v-55d239ab");Object(o["w"])("data-v-55d239ab");var a={class:"single_form"},r={class:"myField"},l=Object(o["j"])("label",{for:"profetionId"},"מקצוע",-1),c={class:"myField"},s=Object(o["j"])("label",{for:"planId"},"תוכנית",-1);Object(o["u"])();var u=i((function(e,t,n,i,u,d){var _=Object(o["B"])("Dropdown"),p=Object(o["B"])("Button");return Object(o["t"])(),Object(o["f"])("div",a,[Object(o["j"])("div",r,[l,Object(o["j"])(_,{modelValue:u.profetionId,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.profetionId=e}),options:d.profetions,optionLabel:"profession_name",optionValue:"profession_id",id:"profetionId"},null,8,["modelValue","options"])]),Object(o["j"])("div",c,[s,Object(o["j"])(_,{modelValue:u.selectedPlan,"onUpdate:modelValue":t[2]||(t[2]=function(e){return u.selectedPlan=e}),options:d.palns,optionLabel:"FileName",id:"planId",showClear:""},null,8,["modelValue","options"])]),Object(o["j"])(p,{icon:"pi pi-file-pdf",label:"הצג תוכנית",onClick:d.displayPlan},null,8,["onClick"])])})),d=n("5530"),_=(n("a9e3"),n("4de4"),n("d81d"),n("7db0"),n("0100")),p=n("bb57"),m=n("8072"),f=n("5502"),b={name:"SelectPlan",props:{apartmentId:{type:Number}},emits:["displayPlan","close"],components:{Dropdown:_["a"],Button:p["a"]},data:function(){return{allPlans:[],profetionId:null,selectedPlan:null}},mounted:function(){var e=this,t=[Object(m["d"])("user_exec",this.userID,m["c"].Int),Object(m["d"])("apartment_id",this.apartmentId,m["c"].Int)];Object(m["e"])("pr_qc_get_planes",t).then((function(t){t=JSON.parse(t),t.Table.length>0?e.allPlans=t.Table:(e.$toast.add({severity:"warn",summary:"בחירת תוכנית",detail:"אין נתונים להצגה",life:1e4,closable:!0}),e.$emit("close"))})).catch((function(t){console.log("pr_qc_get_planes-error",t),e.$toast.add({severity:"error",summary:"שגיאה - פנה לתמיכה",detail:t,life:1e4,closable:!0})}))},methods:{displayPlan:function(){this.profetionId>0&&null!==this.selectedPlan?this.$emit("displayPlan",this.selectedPlan):this.$toast.add({severity:"error",summary:"נתונים חסרים",detail:"יש לבחור תוכנית",life:1e4,closable:!0})}},computed:Object(d["a"])({profetions:function(){var e=this,t=this.allPlans.map((function(e){return e.profession_id})).filter((function(e,t,n){return n.indexOf(e)===t&&""!==e}));return t.map((function(t){return{profession_id:t,profession_name:e.allPlans.find((function(e){return e.profession_id===t})).profession_name}})).sort((function(e,t){return e.profession_name.toLocaleLowerCase()<t.profession_name.toLocaleLowerCase()?-1:e.profession_name.toLocaleLowerCase()>t.profession_name.toLocaleLowerCase()?1:0}))},palns:function(){var e=this;return this.allPlans.filter((function(t){return t.profession_id===e.profetionId}))}},Object(f["c"])({userID:function(e){return+e.api.userID}}))};n("d4ad");b.render=u,b.__scopeId="data-v-55d239ab";t["a"]=b},"8c13":function(e,t,n){"use strict";n("6dfd")},"8ddf":function(e,t,n){e.exports=n.p+"assets/img/logo-apoint-min.643c4b55.png"},"8fd7":function(e,t,n){},9:function(e,t){},9492:function(e,t,n){"use strict";n("8fd7")},"976c":function(e,t,n){},9854:function(e,t,n){"use strict";n("bbf5")},"9a0f":function(e,t,n){e.exports=n.p+"assets/img/item-6.463cb5dd.png"},"9a6d":function(e,t,n){},"9f4b":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));var o={e_draft:1100,e_open:1101,e_completed:1102,e_in_progress:1105,e_existing_situation:1107,e_reminder:1108,e_close:1109},i={e_qualityControl:254},a={e_testLogin:1,e_QCReporting_loadDdl:2,e_QualityControlsFilters_loadDdl:3,e_QualityControl_loadDdl:4,e_QualityControls_loadAttFiles:5}},a029:function(e,t,n){e.exports=n.p+"assets/img/item-menu-5.37a017e9.png"},a67b:function(e,t,n){"use strict";var o=n("7a23"),i=Object(o["P"])("data-v-f921e5aa");Object(o["w"])("data-v-f921e5aa");var a={class:"single_form_buttons"};Object(o["u"])();var r=i((function(e,t,n,i,r,l){var c=Object(o["B"])("Button");return Object(o["t"])(),Object(o["f"])("div",a,[Object(o["j"])(c,{disabled:0===n.apartmentId,label:"תוכניות",onClick:l.plans,icon:"pi pi-file-pdf"},null,8,["disabled","onClick"]),Object(o["j"])(c,{label:"דיווח",onClick:l.reporting,icon:"pi pi-arrow-circle-up"},null,8,["onClick"])])})),l=(n("a9e3"),n("bb57")),c={name:"QualityControlOpen",components:{Button:l["a"]},props:{quality_control_id:{type:Number,require:!0},apartmentId:{type:Number}},emits:["plans","reporting"],methods:{plans:function(){this.$emit("plans")},reporting:function(){this.$emit("reporting")}}};n("db5c");c.render=r,c.__scopeId="data-v-f921e5aa";t["a"]=c},a913:function(e,t,n){e.exports=n.p+"assets/img/item-sm-0.361a0872.png"},ac8c:function(e,t,n){e.exports=n.p+"assets/img/item-sm-3.aede6b8f.png"},ad20:function(e,t,n){},b036:function(e,t,n){"use strict";var o=n("7a23"),i=Object(o["P"])("data-v-955e5376");Object(o["w"])("data-v-955e5376");var a={class:"report-container"},r={key:0,class:"error p-mt-1 p-mr-2"},l={class:"actions-btns"};Object(o["u"])();var c=i((function(e,t,n,i,c,s){var u=Object(o["B"])("a-point-textbox"),d=Object(o["B"])("a-point-checkbox"),_=Object(o["B"])("a-point-dropdown"),p=Object(o["B"])("Textarea"),m=Object(o["B"])("RadioButton"),f=Object(o["B"])("Button"),b=Object(o["B"])("ConfirmPopup");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["j"])("div",a,[Object(o["j"])("div",null,[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(c.fields,(function(e,t){return Object(o["t"])(),Object(o["f"])("div",{key:t,class:"p-m-2"},[Object(o["j"])("div",{class:"boldFont fieldLabel",for:e.Name},Object(o["F"])(e.Caption),9,["for"]),Object(o["j"])("div",{class:"",ref:"",id:e.Name},["text"==e.apointType?(Object(o["t"])(),Object(o["f"])(u,{key:0,field:e,"model-value":e.ControlSource,"onUpdate:modelValue":function(t){return e.ControlSource=t}},null,8,["field","model-value","onUpdate:modelValue"])):"checkbox"==e.apointType?(Object(o["t"])(),Object(o["f"])(d,{key:1,field:e,"model-value":e.ControlSource,"onUpdate:modelValue":function(t){return e.ControlSource=t}},null,8,["field","model-value","onUpdate:modelValue"])):"dropdown"==e.apointType?(Object(o["t"])(),Object(o["f"])(_,{key:2,field:e,"model-value":e.ControlSource,"onUpdate:modelValue":function(t){return e.ControlSource=t}},null,8,["field","model-value","onUpdate:modelValue"])):"textarea"==e.apointType?(Object(o["t"])(),Object(o["f"])(p,{key:3,field:e,"model-value":e.ControlSource,"onUpdate:modelValue":function(t){return e.ControlSource=t},style:{resize:"none","background-color":"#f2f2f2",width:"100%"}},null,8,["field","model-value","onUpdate:modelValue"])):"radioButton"==e.apointType?(Object(o["t"])(!0),Object(o["f"])(o["a"],{key:4},Object(o["z"])(e.RowSource,(function(t){return Object(o["t"])(),Object(o["f"])("div",{key:t.optionValue,class:"p-field-radiobutton"},[Object(o["j"])(m,{id:t[e.optionValue],name:e.Name,value:t[e.optionValue],modelValue:e.ControlSource,"onUpdate:modelValue":function(t){return e.ControlSource=t}},null,8,["id","name","value","modelValue","onUpdate:modelValue"]),Object(o["j"])("label",{class:"radioLabel",for:t[e.optionValue]},Object(o["F"])(t[e.optionLabel]),9,["for"])])})),128)):Object(o["g"])("",!0)],8,["id"]),e.check?(Object(o["t"])(),Object(o["f"])("span",r," * שדה חובה ")):Object(o["g"])("",!0)])})),128))]),Object(o["j"])("div",l,[Object(o["j"])(f,{class:"myBtn",label:"שמור וסגור",onClick:s.saveClose,icon:"pi pi-check"},null,8,["onClick"]),Object(o["j"])(f,{class:"myBtn",label:"צרף תמונות",onClick:t[1]||(t[1]=function(e){return s.addPoto(e)}),icon:"pi pi-camera"}),Object(o["j"])(f,{class:"myBtn",label:"סגור בקרה",onClick:s.closeQC,icon:"pi pi-check-circle"},null,8,["onClick"])])]),Object(o["j"])(b,{class:"max-z-index"})],64)})),s=n("5530"),u=(n("4de4"),n("7db0"),n("159b"),n("b35c")),d=n("4b1d"),_=n("35f5"),p=n("148f"),m=n("bb57"),f=n("4c62"),b=n("8072"),j=n("5502"),h=n("9421"),O=n("9f4b"),g={name:"QCReporting",components:{APointDropdown:d["a"],APointTextbox:_["a"],APointCheckbox:p["a"],Textarea:f["a"],RadioButton:u["a"],Button:m["a"],ConfirmPopup:h["a"]},props:{qualityControl:{type:Object,required:!0}},emits:["closeReporting","addPoto"],data:function(){return{fields:[{num:1,apointType:"radioButton",check:!1,required:!0,Caption:"סטטוס חדש:",optionLabel:"status_name",optionValue:"status_id",ControlSource:null,RowSource:[],Enabled:!0,Name:"status"},{num:2,apointType:"textarea",check:!1,required:!0,Caption:"מה בוצע:",Format:"",ControlSource:null,Enabled:!0,Locked:!1,Name:"action_performed"},{num:3,apointType:"dropdown",check:!1,required:!0,Caption:"עובר לטיפול:",optionLabel:"user_full_name",optionValue:"user_id",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"responsible"}],fields_enum:{e_status:1,e_action_performed:2,e_responsible:3}}},mounted:function(){var e=this;this.$store.commit("main/setSpinner",{id:O["c"].e_QCReporting_loadDdl,flag:!0});var t,n=function(){e.getField(e.fields_enum.e_status).RowSource=e.getStatuses().filter((function(e){return e.status_id!==O["b"].e_draft&&e.status_id!==O["b"].e_reminder&&e.status_id!==O["b"].e_close})),e.getField(e.fields_enum.e_responsible).RowSource=e.getResponsibles(e.qualityControl.project_id)},o=0,i=setInterval((function(){o++,!1===e.isDataLoaded&&o<3e4||(clearInterval(i),n(),e.$store.commit("main/setSpinner",{id:O["c"].e_QCReporting_loadDdl,flag:!1}))}),1);t=this.qualityControl.status_id==O["b"].e_open||this.qualityControl.status_id===O["b"].e_reminder?O["b"].e_in_progress:this.qualityControl.status_id,this.getField(this.fields_enum.e_status).ControlSource=t,this.getField(this.fields_enum.e_responsible).ControlSource=this.qualityControl.responsible_id},methods:{getField:function(e){return this.fields.find((function(t){return t.num===e}))},checkData:function(){var e=!1;return this.fields.forEach((function(t){!t.required||null!=t.ControlSource&&""!=t.ControlSource?t.check=!1:(t.check=!0,e=!0)})),e},saveData:function(e,t){var n=this;if(!0!==this.checkData()){var o=[Object(b["d"])("user_exec",this.userID,b["c"].Int),Object(b["d"])("quality_control_id",this.qualityControl.quality_control_id,b["c"].Int),Object(b["d"])("status_id",!0===e?O["b"].e_close:this.getField(this.fields_enum.e_status).ControlSource,b["c"].Int),Object(b["d"])("responsible_id",this.getField(this.fields_enum.e_responsible).ControlSource,b["c"].Int),Object(b["d"])("action_performed",this.getField(this.fields_enum.e_action_performed).ControlSource,b["c"].NVarChar)];Object(b["e"])("pr_qc_reporting_ins",o).then((function(o){if(o=JSON.parse(o),0===o.procReturnValue){n.$toast.add({severity:"success",summary:"הדיווח נשמר בהצלחה",detail:"",life:3e3,closable:!0});var i={quality_control_id:n.qualityControl.quality_control_id,status_id:!0===e?O["b"].e_close:n.getField(n.fields_enum.e_status).ControlSource,responsible_id:n.getField(n.fields_enum.e_responsible).ControlSource};t?n.$emit("addPoto",i):n.$emit("closeReporting",i)}else n.$toast.add({severity:"error",summary:"שגיאה בעדכון דיווח- פנה לתמיכה",detail:"",life:1e4,closable:!0}),console.log("pr_qc_reporting_ins-error-procReturnValue",o.procReturnValue)})).catch((function(e){n.$toast.add({severity:"error",summary:"שגיאה - פנה לתמיכה",detail:e,life:1e4,closable:!0}),console.log("pr_qc_reporting_ins-error",e)}))}},saveClose:function(){this.saveData(!1)},closeQC:function(){this.saveData(!0)},addPoto:function(e){var t=this;!0===this.checkData()?this.$confirm.require({target:e.currentTarget,message:"לא ניתן לשמור האם לצאת ללא שמירה?",icon:"pi pi-exclamation-triangle",accept:function(){t.$emit("addPoto")},reject:function(){}}):this.saveData(!1,!0)}},computed:Object(s["a"])(Object(s["a"])({},Object(j["c"])({userID:function(e){return+e.api.userID},isDataLoaded:function(e){return e.qc.isDataLoaded}})),Object(j["b"])({getStatuses:"qc/getStatuses",getResponsibles:"qc/getResponsibles"})),unmounted:function(){this.$store.commit("main/setSpinner",{id:O["c"].e_QCReporting_loadDdl,flag:!1})}};n("55d2");g.render=c,g.__scopeId="data-v-955e5376";t["a"]=g},b6a4:function(e,t,n){"use strict";var o=n("7a23"),i=Object(o["P"])("data-v-70a2ecbe");Object(o["w"])("data-v-70a2ecbe");var a={class:"buttons-control"},r={class:"first-buttons-section"},l={class:"second-buttons-section"};Object(o["u"])();var c=i((function(e,t,n,i,c,s){var u=Object(o["B"])("Button");return Object(o["t"])(),Object(o["f"])("div",a,[Object(o["j"])("div",r,[Object(o["j"])(u,{disabled:0===n.apartmentId,label:"תוכניות",onClick:s.plans,icon:"pi pi-file-pdf",class:"p-button-info p-button-outlined"},null,8,["disabled","onClick"]),Object(o["j"])(u,{label:"הוסף תמונה",onClick:s.addPoto,icon:"pi pi-camera",class:"p-button-info p-button-outlined"},null,8,["onClick"])]),Object(o["j"])("div",l,[Object(o["j"])(u,{label:"שמור וסגור",onClick:s.saveClose,icon:"pi pi-check"},null,8,["onClick"]),Object(o["j"])(u,{label:"בקרה חדשה",onClick:s.addNewQC,icon:"pi pi-plus-circle"},null,8,["onClick"])])])})),s=(n("a9e3"),n("bb57")),u={name:"QualityControlAdd",props:{apartmentId:{type:Number}},emits:["saveClose","plans","addNewQC","addPoto"],components:{Button:s["a"]},methods:{saveClose:function(){this.$emit("saveClose")},addNewQC:function(){this.$emit("addNewQC")},plans:function(){this.$emit("plans")},addPoto:function(){this.$emit("addPoto")}}};n("215e");u.render=c,u.__scopeId="data-v-70a2ecbe";t["a"]=u},b751:function(e,t,n){},b83b:function(e,t,n){"use strict";n("4a9b")},bbf5:function(e,t,n){},c4a8:function(e,t,n){"use strict";var o=n("7a23"),i={key:0,class:"p-grid",style:{"max-width":"400px"}};function a(e,t,n,a,r,l){var c=Object(o["B"])("Galleria");return Object(o["t"])(),Object(o["f"])(o["a"],null,[Object(o["j"])(c,{value:n.images,activeIndex:r.activeIndex,"onUpdate:activeIndex":t[1]||(t[1]=function(e){return r.activeIndex=e}),responsiveOptions:r.responsiveOptions,numVisible:7,containerStyle:"max-width: 850px",circular:!0,fullScreen:!0,showItemNavigators:!0,showThumbnails:!1,visible:r.displayBasic,"onUpdate:visible":t[2]||(t[2]=function(e){return r.displayBasic=e})},{item:Object(o["L"])((function(e){return[Object(o["j"])("img",{src:e.item.itemImageSrc,alt:e.item.alt,style:{width:"100%",display:"block"}},null,8,["src","alt"])]})),thumbnail:Object(o["L"])((function(e){return[Object(o["j"])("img",{src:e.item.thumbnailImageSrc,alt:e.item.alt,style:{display:"block"}},null,8,["src","alt"])]})),_:1},8,["value","activeIndex","responsiveOptions","visible"]),n.images?(Object(o["t"])(),Object(o["f"])("div",i,[(Object(o["t"])(!0),Object(o["f"])(o["a"],null,Object(o["z"])(n.images,(function(e,t){return Object(o["t"])(),Object(o["f"])("div",{class:"p-col-6",key:t},[Object(o["j"])("img",{src:e.thumbnailImageSrc,alt:e.alt,style:{cursor:"pointer"},onClick:function(e){return l.imageClick(t)}},null,8,["src","alt","onClick"])])})),128))])):Object(o["g"])("",!0)],64)}var r=n("3ccb"),l={components:{Galleria:r["a"]},props:{images:{type:Object,require:!0},displayFullScreen:{type:Boolean,default:!1}},emits:["closeGalleria"],data:function(){return{activeIndex:0,responsiveOptions:[{breakpoint:"1024px",numVisible:5},{breakpoint:"768px",numVisible:3},{breakpoint:"560px",numVisible:1}],responsiveOptions2:[{breakpoint:"1500px",numVisible:5},{breakpoint:"1024px",numVisible:3},{breakpoint:"768px",numVisible:2},{breakpoint:"560px",numVisible:1}],displayBasic:!1}},mounted:function(){this.displayFullScreen&&this.imageClick(0)},methods:{imageClick:function(e){this.activeIndex=e,this.displayBasic=!0}},watch:{displayBasic:function(e){this.displayFullScreen&&!e&&this.$emit("closeGalleria")}}};l.render=a;t["a"]=l},c8ad:function(e,t,n){},d392:function(e,t,n){},d4ad:function(e,t,n){"use strict";n("85ec")},d796:function(e,t,n){e.exports=n.p+"assets/img/item-menu-1.92c1e95b.png"},d8dd:function(e,t,n){"use strict";n("742d")},db5c:function(e,t,n){"use strict";n("1f2b")},dc5e:function(e,t,n){e.exports=n.p+"assets/img/item-3.ead73d40.png"},e5ef:function(e,t,n){"use strict";n("7f9b")},e9e2:function(e,t,n){},ec5d:function(e,t,n){"use strict";n("4443")},eca0:function(e,t,n){"use strict";n("1d3d")},edea:function(e,t,n){e.exports=n.p+"assets/img/item-menu-4.48a03616.png"},f17a:function(e,t,n){},f255:function(e,t,n){e.exports=n.p+"assets/img/item-sm-5.7b2a6daa.png"},f36f:function(e,t,n){},f713:function(module,__webpack_exports__,__webpack_require__){"use strict";var C_Development_RamAderetYoman_webDev_ramVue_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("5530"),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5__),_APoint_textbox_vue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("35f5"),_APoint_checkbox_vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("148f"),_APoint_dropdown_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("4b1d"),primevue_selectbutton__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("a5af"),primevue_button__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("bb57"),_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("8072"),primevue_multiselect__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("4147"),primevue_autocomplete__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("4084"),vuex__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("5502"),_scripts_enums_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("9f4b");__webpack_exports__["a"]={name:"QualityControlsFilters",components:{APointTextbox:_APoint_textbox_vue__WEBPACK_IMPORTED_MODULE_6__["a"],APointCheckbox:_APoint_checkbox_vue__WEBPACK_IMPORTED_MODULE_7__["a"],APointDropdown:_APoint_dropdown_vue__WEBPACK_IMPORTED_MODULE_8__["a"],SelectButton:primevue_selectbutton__WEBPACK_IMPORTED_MODULE_9__["a"],Button:primevue_button__WEBPACK_IMPORTED_MODULE_10__["a"],MultiSelect:primevue_multiselect__WEBPACK_IMPORTED_MODULE_12__["a"],AutoComplete:primevue_autocomplete__WEBPACK_IMPORTED_MODULE_13__["a"]},props:{removeFilter:{type:Number}},emits:["showData","updateFilters","clearFilters","filterRemoved"],data:function(){var e=this;return{showControls:{optionLabel:"lbl",optionValue:"val",ControlSource:null,RowSource:[{val:7,lbl:"בקרות מהשבוע האחרון"},{val:0,lbl:"בקרות מהיום"}]},fields:[{num:1,apointType:"multiSelect",check:!1,required:!1,Caption:"שם פרוייקט",optionLabel:"ProjectName",optionValue:"ProjectId",showClear:!0,ControlSource:null,RowSource:[],Enabled:!0,Locked:!1,Name:"project_id",FuncOnUpdate:function(t){e.filterZonesAndZoneTypes(),e.setFilters(t)},type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar},{num:2,apointType:"multiSelect",check:!1,required:!1,Caption:"סטטוס",optionLabel:"status_name",optionValue:"status_id",showClear:!0,ControlSource:null,RowSource:[],Enabled:!0,Locked:!1,Name:"status_id",type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar,FuncOnUpdate:function(t){return e.setFilters(t)}},{num:4,apointType:"text",check:!1,required:!1,Caption:"מתאריך",manualInput:!1,showButtonBar:!0,Format:"Long Date",ControlSource:null,Enabled:!0,Name:"btwn_open_start",showIcon:!0,type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].SmallDateTime,FuncOnUpdate:function(t){return e.setFilters(t)}},{num:5,apointType:"text",check:!1,required:!1,Caption:"עד תאריך",manualInput:!1,showButtonBar:!0,Format:"Long Date",ControlSource:null,Enabled:!0,Name:"btwn_open_end",showIcon:!0,type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].SmallDateTime,FuncOnUpdate:function(t){return e.setFilters(t)}},{num:6,apointType:"dropdown",check:!1,required:!1,Caption:"בקרות בפיגור מעל",optionLabel:"Name",optionValue:"ID",showClear:!0,ControlSource:null,RowSource:[],Enabled:!0,Locked:!1,Name:"NotDone",type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].Int,FuncOnUpdate:function(t){return e.setFilters(t)}},{num:7,apointType:"multiSelect",check:!1,required:!1,Caption:"פרק",optionLabel:"chapter_name",optionValue:"chapter_id",showClear:!0,ControlSource:null,RowSource:[],Enabled:!0,Locked:!1,Name:"chapter_id",type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar,FuncOnUpdate:function(t){return e.setFilters(t)}},{num:17,apointType:"dropdown",check:!1,required:!1,Caption:"סוג חלל 1",showClear:!0,ControlSource:null,RowSource:[],Enabled:!0,Name:"zoneType1",allRowSource:[],FuncOnUpdate:function(t,n){e.setFilters(t,n)},type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar},{num:8,apointType:"dropdown",check:!1,required:!1,Caption:"חלל 1",showClear:!0,ControlSource:null,RowSource:[],Enabled:!0,Name:"zone_1_id",allRowSource:[],FuncOnUpdate:function(t,n){e.setFilters(t,n)},type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar},{num:18,apointType:"dropdown",check:!1,required:!1,Caption:"סוג חלל 2",showClear:!0,ControlSource:null,RowSource:[],Enabled:!0,Name:"zoneType2",allRowSource:[],FuncOnUpdate:function(t,n){e.setFilters(t,n)},type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar},{num:9,apointType:"dropdown",check:!1,required:!1,Caption:"חלל 2",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"zone_2_id",allRowSource:[],FuncOnUpdate:function(t,n){e.setFilters(t,n)},type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar},{num:10,apointType:"dropdown",check:!1,required:!1,Caption:"חלל 3",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"zone_3_id",allRowSource:[],FuncOnUpdate:function(t,n){e.setFilters(t,n)},type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar},{num:11,apointType:"text",check:!1,required:!1,Caption:"יעד לביצוע",minDate:null,maxDate:null,manualInput:!1,showButtonBar:!0,Format:"Long Date",ControlSource:"",Enabled:!0,Name:"planed_date",showIcon:!0,show:!1,isHide:!0,type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar,FuncOnUpdate:function(t){return e.setFilters(t)}},{num:12,apointType:"multiSelect",check:!1,required:!1,Caption:"סוג ליקוי",optionLabel:"impairment_desc",optionValue:"ID",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"impairment_id",show:!1,isHide:!0,type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar,FuncOnUpdate:function(t){return e.setFilters(t)}},{num:13,apointType:"multiSelect",check:!1,required:!1,Caption:"רמת חומרה",optionLabel:"level_desc",optionValue:"ID",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"hardware_level_id",show:!1,isHide:!0,type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar,FuncOnUpdate:function(t){return e.setFilters(t)}},{num:14,apointType:"multiSelect",check:!1,required:!1,Caption:"פותח הבקרה",optionLabel:"user_full_name",optionValue:"user_id",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"create_by",show:!1,isHide:!0,type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar,FuncOnUpdate:function(t){return e.setFilters(t)}},{num:15,apointType:"multiSelect",check:!1,required:!1,Caption:"סוגר הבקרה",optionLabel:"user_full_name",optionValue:"user_id",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"user_closed",show:!1,isHide:!0,type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar,FuncOnUpdate:function(t){return e.setFilters(t)}},{num:16,apointType:"multiSelect",check:!1,required:!1,Caption:"אחראי לביצוע",optionLabel:"user_full_name",optionValue:"user_id",showClear:!0,Format:"",ControlSource:null,RowSource:[],Enabled:!0,Name:"responsible_id",show:!1,isHide:!0,type:_services_APointAPI__WEBPACK_IMPORTED_MODULE_11__["c"].NVarChar,FuncOnUpdate:function(t){return e.setFilters(t)}}],filter:{},showAllBtn:!1,showAllBtnLbl:"הצג מסננים נוספים",showAllBtnIcon:"pi pi-chevron-down",displaySpinner:!1,fields_enum:{e_projectId:1,e_status:2,e_showControls:3,e_fromDate:4,e_toDate:5,e_notDone:6,e_chapter:7,e_zone1:8,e_zone2:9,e_zone3:10,e_planed_date:11,e_impairment:12,e_hardware_level:13,e_createBy:14,e_userClosed:15,e_responsible:16,e_zoneType1:17,e_zoneType2:18}}},mounted:function(){this.getDdlData(),this.setBasicFilter()},methods:{updateField:function updateField(field,event){field.ControlSource=event,void 0!==field.FuncOnUpdate&&eval(field.FuncOnUpdate(field,event))},setFilters:function(e){this.$emit("updateFilters",e)},showQc:function(){this.$emit("showData")},showAllFilters:function(){this.showAllBtn?(this.showAllBtn=!1,this.fields.forEach((function(e){e.isHide&&(e.show=!1)})),this.showAllBtnLbl="הצג מסננים נוספים",this.showAllBtnIcon="pi pi-chevron-down"):(this.showAllBtn=!0,this.fields.forEach((function(e){e.show||(e.show=!0)})),this.showAllBtnLbl="הסתר מסננים נוספים",this.showAllBtnIcon="pi pi-chevron-up")},clearFilters:function(){this.fields.forEach((function(e){e.ControlSource=null})),this.$emit("clearFilters")},changeDates:function(){var e=new Date,t=new Date;this.getField(this.fields_enum.e_toDate).ControlSource=t,e.setDate(e.getDate()+-1*this.showControls.ControlSource),this.getField(this.fields_enum.e_fromDate).ControlSource=new Date(e),this.setFilters(this.getField(this.fields_enum.e_fromDate)),this.setFilters(this.getField(this.fields_enum.e_toDate)),this.showControls.ControlSource=null},getDdlData:function(){var e=this;this.$store.commit("main/setSpinner",{id:_scripts_enums_js__WEBPACK_IMPORTED_MODULE_15__["c"].e_QualityControlsFilters_loadDdl,flag:!0});var t=function(){e.getField(e.fields_enum.e_projectId).RowSource=e.getProjectsUser(),e.getField(e.fields_enum.e_status).RowSource=e.getStatuses(),e.getField(e.fields_enum.e_zone1).allRowSource=e.getZone1(),e.getField(e.fields_enum.e_zoneType1).allRowSource=e.getZone1().map((function(e){return{zone_type_name:e.zone_type_name,project_id:e.project_id}})),e.getField(e.fields_enum.e_zone2).allRowSource=e.getZone2(),e.getField(e.fields_enum.e_zoneType2).allRowSource=e.getZone2().map((function(e){return{zone_type_name:e.zone_type_name,project_id:e.project_id}})),e.getField(e.fields_enum.e_chapter).RowSource=e.getChapters(),e.getField(e.fields_enum.e_zone3).allRowSource=e.getZone3(),e.getField(e.fields_enum.e_responsible).RowSource=e.getResponsibles(),e.getField(e.fields_enum.e_impairment).RowSource=e.getImpairment(),e.getField(e.fields_enum.e_hardware_level).RowSource=e.getHardwareLevel(),e.getField(e.fields_enum.e_createBy).RowSource=e.getAllUsers(),e.getField(e.fields_enum.e_userClosed).RowSource=e.getAllUsers(),e.getField(e.fields_enum.e_notDone).RowSource=e.getNotDone(),e.filterZonesAndZoneTypes()},n=0,o=setInterval((function(){n++,!1===e.isDataLoaded&&n<3e4||(clearInterval(o),t(),e.$store.commit("main/setSpinner",{id:_scripts_enums_js__WEBPACK_IMPORTED_MODULE_15__["c"].e_QualityControlsFilters_loadDdl,flag:!1}))}),1)},getField:function(e){return this.fields.find((function(t){return t.num===e}))},filterZonesAndZoneTypes:function(){var e;e=this.getField(this.fields_enum.e_projectId).ControlSource,this.getField(this.fields_enum.e_zone1).RowSource=this.getField(this.fields_enum.e_zone1).allRowSource,this.getField(this.fields_enum.e_zone2).RowSource=this.getField(this.fields_enum.e_zone2).allRowSource,this.getField(this.fields_enum.e_zone3).RowSource=this.getField(this.fields_enum.e_zone3).allRowSource,this.getField(this.fields_enum.e_zoneType1).RowSource=this.getField(this.fields_enum.e_zoneType1).allRowSource,this.getField(this.fields_enum.e_zoneType2).RowSource=this.getField(this.fields_enum.e_zoneType2).allRowSource,null!==e&&e.length>0&&(this.getField(this.fields_enum.e_zone1).RowSource=this.getField(this.fields_enum.e_zone1).RowSource.filter((function(t){return e.indexOf(t.project_id)>=0})),this.getField(this.fields_enum.e_zone2).RowSource=this.getField(this.fields_enum.e_zone2).RowSource.filter((function(t){return e.indexOf(t.project_id)>=0})),this.getField(this.fields_enum.e_zone3).RowSource=this.getField(this.fields_enum.e_zone3).RowSource.filter((function(t){return e.indexOf(t.project_id)>=0})),this.getField(this.fields_enum.e_zoneType1).RowSource=this.getField(this.fields_enum.e_zoneType1).RowSource.filter((function(t){return e.indexOf(t.project_id)>=0})),this.getField(this.fields_enum.e_zoneType2).RowSource=this.getField(this.fields_enum.e_zoneType2).RowSource.filter((function(t){return e.indexOf(t.project_id)>=0}))),this.getField(this.fields_enum.e_zone1).RowSource=this.getField(this.fields_enum.e_zone1).RowSource.map((function(e){return e.project_zone_name})).filter((function(e,t,n){return n.indexOf(e)===t&&""!==e})).sort(),this.getField(this.fields_enum.e_zone2).RowSource=this.getField(this.fields_enum.e_zone2).RowSource.map((function(e){return e.project_zone_name})).filter((function(e,t,n){return n.indexOf(e)===t&&""!==e})).sort(),this.getField(this.fields_enum.e_zone3).RowSource=this.getField(this.fields_enum.e_zone3).RowSource.map((function(e){return e.project_zone_name})).filter((function(e,t,n){return n.indexOf(e)===t&&""!==e})).sort(),this.getField(this.fields_enum.e_zoneType1).RowSource=this.getField(this.fields_enum.e_zoneType1).RowSource.map((function(e){return e.zone_type_name})).filter((function(e,t,n){return n.indexOf(e)===t&&""!==e})).sort(),this.getField(this.fields_enum.e_zoneType2).RowSource=this.getField(this.fields_enum.e_zoneType2).RowSource.map((function(e){return e.zone_type_name})).filter((function(e,t,n){return n.indexOf(e)===t&&""!==e})).sort()},setBasicFilter:function(){var e=this.$route.params.filter;switch(this.clearFilters(),e){case"myResponsibility":this.getField(this.fields_enum.e_responsible).ControlSource=JSON.parse("["+this.userID+"]"),this.setFilters(this.getField(this.fields_enum.e_responsible));break;case"ICreated":this.getField(this.fields_enum.e_createBy).ControlSource=JSON.parse("["+this.userID+"]"),this.setFilters(this.getField(this.fields_enum.e_createBy));break;default:}this.$emit("showData")}},computed:Object(C_Development_RamAderetYoman_webDev_ramVue_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(C_Development_RamAderetYoman_webDev_ramVue_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_14__["c"])({userID:function(e){return+e.api.userID},isDataLoaded:function(e){return e.qc.isDataLoaded}})),Object(vuex__WEBPACK_IMPORTED_MODULE_14__["b"])({getStatuses:"qc/getStatuses",getZone1:"qc/getZone1",getZone2:"qc/getZone2",getZone3:"qc/getZone3",getChapters:"qc/getChapters",getResponsibles:"qc/getResponsibles",getImpairment:"qc/getImpairment",getHardwareLevel:"qc/getHardwareLevel",getAllUsers:"qc/getAllUsers",getNotDone:"qc/getNotDone",getProjectsUser:"qc/getProjectsUser"})),watch:{"$route.params.filter":function(){this.setBasicFilter()},removeFilter:function(e){e&&(this.getField(e).ControlSource=null,this.$emit("filterRemoved"))}},unmounted:function(){this.$store.commit("main/setSpinner",{id:_scripts_enums_js__WEBPACK_IMPORTED_MODULE_15__["c"].e_QualityControlsFilters_loadDdl,flag:!1})}}},f766:function(e,t,n){e.exports=n.p+"assets/img/item-menu-6.37a017e9.png"}});